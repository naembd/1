<!DOCTYPE html>
<html lang="bn" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>জীবনের যাত্রা: শুরু থেকে শেষ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Sacred Journey Palette -->
    <!-- Application Structure Plan: The application is designed as a single-page, vertical scrolling narrative to guide the user through the chronological stages of the Islamic concept of life's journey. It starts with a fixed navigation header for easy access to each stage. Each of the seven stages is presented in its own thematic section with an introduction, key points, and a relevant visual or interactive element (like a chart or diagram). This linear, story-telling structure was chosen because it intuitively mirrors the subject's timeline—from creation to the final destination—making the profound spiritual concepts easier to follow and digest for the user. Gemini API features for Dua and Amal planning are added to deepen personal reflection and provide actionable steps. -->
    <!-- Visualization & Content Choices: 1. Origin: Goal: Inform. Method: Side-by-side text blocks using HTML/Tailwind to contrast obedience and arrogance. 2. Worldly Life: Goal: Show change. Method: A Chart.js Line Chart to visualize the rise and fall of worldly allure. 3. The Grave: Goal: Compare outcomes. Method: A Chart.js Doughnut Chart to show the two possible states of the grave. 4. Judgment Day: Goal: Organize information. Method: HTML/Tailwind diagram of justice scales and an icon-based list for the 'Five Questions'. 5. Final Destination: Goal: Compare outcomes. Method: Two distinctly styled content cards (light/warm for Paradise, dark/harsh for Hell). 6. Salvation Path: Goal: Inform. Method: A visual path created with HTML/CSS. Gemini API integration for personalized duas and an action plan generator enhances interactivity and personal connection to the content. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans Bengali', sans-serif;
        }
        .nav-link.active {
            color: #ca8a04; /* yellow-600 */
            font-weight: 700;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 450px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 350px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .gemini-button {
            transition: all 0.3s ease;
        }
        .gemini-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #ca8a04;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-stone-50 text-gray-800">

    <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-4 py-3">
            <ul id="nav-menu" class="flex flex-wrap justify-center items-center gap-x-4 gap-y-2 md:gap-x-6 text-sm md:text-base font-medium text-gray-600">
                <li><a href="#s1" class="nav-link hover:text-yellow-600 transition-colors duration-300">সূচনা</a></li>
                <li><a href="#s2" class="nav-link hover:text-yellow-600 transition-colors duration-300">পার্থিব জীবন</a></li>
                <li><a href="#s3" class="nav-link hover:text-yellow-600 transition-colors duration-300">মৃত্যু ও কবর</a></li>
                <li><a href="#s4" class="nav-link hover:text-yellow-600 transition-colors duration-300">হাশরের দিন</a></li>
                <li><a href="#s5" class="nav-link hover:text-yellow-600 transition-colors duration-300"> চূড়ান্ত বিচার</a></li>
                <li><a href="#s6" class="nav-link hover:text-yellow-600 transition-colors duration-300">শেষ গন্তব্য</a></li>
                <li><a href="#s7" class="nav-link hover:text-yellow-600 transition-colors duration-300">মুক্তির পথ</a></li>
            </ul>
        </nav>
    </header>

    <main class="container mx-auto px-4 py-8 md:py-12">
        <div class="text-center mb-12">
            <h1 class="text-3xl md:text-5xl font-bold text-gray-900 mb-2">জীবনের যাত্রা: শুরু থেকে শেষ</h1>
            <p class="text-lg text-gray-600">শেখ খালিদ আল-রাশেদের "আল-বিদায়া ওয়ান-নিহায়া" অবলম্বনে</p>
        </div>

        <div class="space-y-20 md:space-y-28">

            <section id="s1" class="scroll-mt-20">
                <div class="text-center mb-8">
                    <h2 class="text-2xl md:text-3xl font-bold text-teal-700">১. মহাকাহিনীর সূচনা</h2>
                    <p class="mt-2 text-gray-600 max-w-3xl mx-auto">
                        এই বিভাগে আমরা মানব সৃষ্টির সূচনা, ফেরেশতাদের আনুগত্য এবং ইবলিসের অহংকার ও অবাধ্যতার ঘটনা সম্পর্কে জানব। এখান থেকেই সত্য ও মিথ্যার মধ্যে চিরন্তন সংগ্রামের শুরু হয়েছিল, এবং আমাদের জীবন এই সংগ্রামেরই একটি পরীক্ষাক্ষেত্র।
                    </p>
                </div>
                <div class="grid md:grid-cols-2 gap-8 items-start">
                    <div class="bg-white p-6 rounded-lg shadow-md border-l-4 border-emerald-500">
                        <h3 class="font-bold text-xl mb-3 text-emerald-800">আনুগত্যের দৃষ্টান্ত</h3>
                        <p class="text-gray-700">আল্লাহ যখন আদম (আঃ)-কে সৃষ্টি করলেন এবং তাঁর মধ্যে রুহ ফুঁকে দিলেন, তখন তিনি সকল ফেরেশতাকে সিজদা করার আদেশ দেন। আল্লাহর আদেশের প্রতি সম্মান জানিয়ে সকল ফেরেশতা তাৎক্ষণিকভাবে সিজদায় নত হলেন। এটি ছিল আল্লাহর প্রতি তাদের নিখুঁত আনুগত্য এবং বিনয়ের প্রকাশ।</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md border-l-4 border-red-500">
                        <h3 class="font-bold text-xl mb-3 text-red-800">অহংকারের পতন</h3>
                        <p class="text-gray-700">কিন্তু ইবলিস, যে ছিল জিনদের একজন, সে অহংকারবশত অস্বীকার করল। সে যুক্তি দেখাল, "আমি তার চেয়ে শ্রেষ্ঠ। আমাকে আগুন থেকে আর তাকে মাটি থেকে সৃষ্টি করা হয়েছে।" এই অহংকারই ছিল প্রথম পাপ, যা তাকে আল্লাহর রহমত থেকে বিতাড়িত করে এবং মানবজাতির চিরশত্রুতে পরিণত করে।</p>
                    </div>
                </div>
            </section>

            <section id="s2" class="scroll-mt-20">
                 <div class="text-center mb-8">
                    <h2 class="text-2xl md:text-3xl font-bold text-teal-700">২. পার্থিব জীবন: এক অস্থায়ী পরীক্ষা</h2>
                    <p class="mt-2 text-gray-600 max-w-3xl mx-auto">
                        এখানে আমরা পার্থিব জীবনের আসল প্রকৃতি সম্পর্কে আলোচনা করব। কুরআন এবং হাদিসের আলোকে, এই জীবন হলো একটি ক্ষণস্থায়ী পরীক্ষাক্ষেত্র, যার চাকচিক্য ও মোহ একটি প্রতারণা মাত্র। এর সৌন্দর্য বৃষ্টির পর বেড়ে ওঠা ফসলের মতো, যা দ্রুত শুকিয়ে যায়।
                    </p>
                </div>
                <div class="bg-white p-4 md:p-6 rounded-lg shadow-lg">
                    <h3 class="text-center text-xl font-semibold mb-4 text-gray-700">দুনিয়ার জীবনের উত্থান ও পতন</h3>
                    <div class="chart-container">
                        <canvas id="worldlyLifeChart"></canvas>
                    </div>
                    <div class="text-center mt-6">
                        <button class="gemini-button dua-generator bg-teal-600 text-white font-bold py-2 px-5 rounded-lg shadow-md hover:bg-teal-700" data-context="worldly_life">✨ আমার জন্য দোয়া তৈরি করুন</button>
                    </div>
                </div>
            </section>

            <section id="s3" class="scroll-mt-20">
                <div class="text-center mb-8">
                    <h2 class="text-2xl md:text-3xl font-bold text-teal-700">৩. অনিবার্য সমাপ্তি: মৃত্যু ও কবর</h2>
                    <p class="mt-2 text-gray-600 max-w-3xl mx-auto">
                        এই বিভাগে আমরা মৃত্যু এবং কবরের বাস্তবতার মুখোমুখি হব। মৃত্যু হলো জীবনের এক অমোঘ সত্য এবং কবর হলো পরকালের প্রথম ধাপ। কর্মফল অনুযায়ী, কবর কারো জন্য জান্নাতের বাগান আর কারো জন্য জাহান্নামের গর্তে পরিণত হবে।
                    </p>
                </div>
                <div class="grid md:grid-cols-2 gap-8 items-center">
                    <div class="bg-white p-6 rounded-lg shadow-lg">
                         <h3 class="text-center text-xl font-semibold mb-4 text-gray-700">কবরের অবস্থা: কর্মের প্রতিচ্ছবি</h3>
                        <div class="chart-container">
                            <canvas id="graveStateChart"></canvas>
                        </div>
                    </div>
                    <div class="space-y-4">
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h4 class="font-bold text-lg text-emerald-800">মুমিনের বিশ্রাম</h4>
                            <p class="text-gray-600 mt-1">মুমিন ব্যক্তির জন্য মৃত্যু হলো দুনিয়ার কষ্ট ও পরীক্ষা থেকে মুক্তি এবং আল্লাহর রহমতের দিকে এক পরম শান্তির যাত্রা। তার কবর আলোকিত এবং প্রশস্ত করা হয়।</p>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h4 class="font-bold text-lg text-red-800">পাপীর মুক্তি (জগৎ থেকে)</h4>
                            <p class="text-gray-600 mt-1">পক্ষান্তরে, পাপী ব্যক্তির মৃত্যুতে সৃষ্টি জগৎ তার অন্যায় এবং পাপ থেকে "মুক্তি" পায়। তার জন্য কবর হয় এক অন্ধকার ও সংকীর্ণ স্থান, যা শাস্তির সূচনা করে।</p>
                        </div>
                    </div>
                </div>
                 <div class="text-center mt-8">
                    <button class="gemini-button dua-generator bg-teal-600 text-white font-bold py-2 px-5 rounded-lg shadow-md hover:bg-teal-700" data-context="grave">✨ আমার জন্য দোয়া তৈরি করুন</button>
                </div>
            </section>

            <section id="s4" class="scroll-mt-20">
                <div class="text-center mb-8">
                    <h2 class="text-2xl md:text-3xl font-bold text-teal-700">৪. হাশরের দিন: মহাসমাবেশ</h2>
                     <p class="mt-2 text-gray-600 max-w-3xl mx-auto">
                        কিয়ামতের দিন সকল মানবজাতিকে বিচারের জন্য একত্রিত করা হবে, যা হাশরের দিন নামে পরিচিত। এটি এমন এক ভয়াবহ দিন, যখন সূর্য মাথার খুব কাছে চলে আসবে এবং প্রত্যেকে নিজের চিন্তায় এতটাই মগ্ন থাকবে যে সমস্ত পার্থিব সম্পর্ক ছিন্ন হয়ে যাবে।
                    </p>
                </div>
                <div class="grid md:grid-cols-3 gap-6 text-center">
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <span class="text-4xl">☀️</span>
                        <h3 class="font-bold text-lg mt-2">ভয়াবহ পরিস্থিতি</h3>
                        <p class="text-sm text-gray-600 mt-1">সূর্য মাথার মাত্র এক মাইল উপরে থাকবে। মানুষ নিজের কর্ম অনুযায়ী ঘামের মধ্যে হাবুডুবু খাবে।</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <span class="text-4xl">👤</span>
                        <h3 class="font-bold text-lg mt-2">চরম নিঃসঙ্গতা</h3>
                        <p class="text-sm text-gray-600 mt-1">প্রত্যেকে "ইয়া নাফসি, ইয়া নাফসি" (আমার কী হবে) বলতে থাকবে। বাবা-মা, সন্তান, বন্ধু-বান্ধব কেউ কারো হবে না।</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <span class="text-4xl">🔥</span>
                        <h3 class="font-bold text-lg mt-2">জাহান্নামের গর্জন</h3>
                        <p class="text-sm text-gray-600 mt-1">যখন জাহান্নামকে সামনে আনা হবে, তার ভয়াবহ গর্জন শুনে মানুষ ভয়ে নতজানু হয়ে পড়বে।</p>
                    </div>
                </div>
                <div class="mt-8 bg-gradient-to-tr from-yellow-100 to-amber-200 p-6 rounded-lg shadow-lg text-center">
                    <h3 class="font-bold text-xl text-amber-900">একমাত্র আশা: শাফায়াত</h3>
                    <p class="mt-2 text-amber-800 max-w-2xl mx-auto">সেই চরম হতাশার মুহূর্তে, মানবজাতি শেষ নবী মুহাম্মদ (সাঃ)-এর কাছে ছুটে যাবে। তিনিই আল্লাহর অনুমতিতে সুপারিশ (শাফায়াত) করার অধিকার পাবেন, যা হবে সেই ভয়াবহ পরিস্থিতিতে বিশ্বাসীদের জন্য প্রথম এবং সর্বশ্রেষ্ঠ আশার আলো।</p>
                </div>
            </section>
            
            <section id="s5" class="scroll-mt-20">
                <div class="text-center mb-8">
                    <h2 class="text-2xl md:text-3xl font-bold text-teal-700">৫. চূড়ান্ত বিচার: ঐশ্বরিক আদালত</h2>
                    <p class="mt-2 text-gray-600 max-w-3xl mx-auto">
                        হাশরের ময়দানে মহাসমাবেশের পর শুরু হবে চূড়ান্ত বিচার। আল্লাহ তা'আলা নিজেই হবেন বিচারক এবং সেদিন কারো প্রতি বিন্দুমাত্র অবিচার করা হবে না। মানুষের প্রতিটি কাজের হিসাব নেওয়া হবে এবং তার নিজের অঙ্গপ্রত্যঙ্গই তার বিরুদ্ধে সাক্ষ্য দেবে।
                    </p>
                </div>
                <div class="grid md:grid-cols-2 gap-8 items-center">
                     <div class="space-y-4">
                        <div class="bg-white p-4 rounded-lg shadow-md flex items-center gap-4">
                           <span class="text-3xl text-amber-600">⚖️</span>
                           <div>
                                <h4 class="font-bold">ন্যায়ের পাল্লা (মিজান)</h4>
                                <p class="text-sm text-gray-600">সরিষার দানা পরিমাণ ভালো বা মন্দ কাজও নির্ভুলভাবে ওজন করা হবে।</p>
                           </div>
                        </div>
                        <div class="bg-white p-4 rounded-lg shadow-md flex items-center gap-4">
                           <span class="text-3xl text-emerald-600">📖</span>
                           <div>
                                <h4 class="font-bold">আমলনামা প্রদান</h4>
                                <p class="text-sm text-gray-600">সৎকর্মশীলদের ডান হাতে এবং পাপীদের বাম হাতে তাদের কর্মের নথি দেওয়া হবে।</p>
                           </div>
                        </div>
                         <div class="bg-white p-4 rounded-lg shadow-md flex items-center gap-4">
                           <span class="text-3xl text-red-600">🗣️</span>
                           <div>
                                <h4 class="font-bold">দেহের সাক্ষ্য</h4>
                                <p class="text-sm text-gray-600">মানুষের জিহ্বা, হাত ও পা তাদের কৃতকর্মের বিরুদ্ধে সাক্ষ্য দেবে।</p>
                           </div>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-lg">
                        <h3 class="font-bold text-xl mb-4 text-center">যে পাঁচটি বিষয়ে প্রশ্ন করা হবে</h3>
                        <ul class="space-y-3">
                            <li class="flex items-start"><span class="mr-3 text-teal-600 font-bold">১.</span> <div><strong class="font-semibold">জীবন:</strong> কোন কাজে জীবন ব্যয় করেছো?</div></li>
                            <li class="flex items-start"><span class="mr-3 text-teal-600 font-bold">২.</span> <div><strong class="font-semibold">যৌবন:</strong> কোন কাজে যৌবনের শক্তি ক্ষয় করেছো?</div></li>
                            <li class="flex items-start"><span class="mr-3 text-teal-600 font-bold">৩.</span> <div><strong class="font-semibold">সম্পদ (আয়):</strong> কোন উপায়ে সম্পদ উপার্জন করেছো?</div></li>
                            <li class="flex items-start"><span class="mr-3 text-teal-600 font-bold">৪.</span> <div><strong class="font-semibold">সম্পদ (ব্যয়):</strong> কোন পথে সম্পদ ব্যয় করেছো?</div></li>
                            <li class="flex items-start"><span class="mr-3 text-teal-600 font-bold">৫.</span> <div><strong class="font-semibold">জ্ঞান:</strong> অর্জিত জ্ঞান অনুযায়ী কতটুকু আমল করেছো?</div></li>
                        </ul>
                    </div>
                </div>
                 <div class="text-center mt-8">
                    <button class="gemini-button dua-generator bg-teal-600 text-white font-bold py-2 px-5 rounded-lg shadow-md hover:bg-teal-700" data-context="judgement">✨ আমার জন্য দোয়া তৈরি করুন</button>
                </div>
            </section>

            <section id="s6" class="scroll-mt-20">
                <div class="text-center mb-8">
                    <h2 class="text-2xl md:text-3xl font-bold text-teal-700">৬. চিরস্থায়ী নিবাস: শেষ গন্তব্য</h2>
                    <p class="mt-2 text-gray-600 max-w-3xl mx-auto">
                       চূড়ান্ত বিচারের পর মানবজাতি দুটি দলে বিভক্ত হয়ে তাদের চিরস্থায়ী গন্তব্যের দিকে যাত্রা করবে। এই গন্তব্য নির্ধারিত হবে পৃথিবীতে করা কর্মের উপর ভিত্তি করে। এটিই যাত্রার শেষ পর্যায়, যেখানে ফলাফল হবে অনন্ত সুখ অথবা অনন্ত শাস্তি।
                    </p>
                </div>
                 <div class="grid md:grid-cols-2 gap-8">
                    <div class="bg-gradient-to-br from-emerald-50 to-green-100 p-6 rounded-lg shadow-xl border-t-4 border-emerald-500">
                        <h3 class="text-2xl font-bold text-center text-emerald-800 mb-4">জান্নাত: চিরস্থায়ী সুখ</h3>
                        <p class="text-center text-gray-700">যারা ডান হাতে আমলনামা পাবে, তাদের জন্য রয়েছে এক সন্তোষজনক ও আনন্দময় জীবন। তাদের চেহারা হবে উজ্জ্বল ও হাস্যোজ্জ্বল। তাদের বলা হবে, "অতীতে তোমরা যা প্রেরণ করেছিলে, তার প্রতিদানস্বরূপ তৃপ্তিসহকারে খাও ও পান করো।"</p>
                    </div>
                    <div class="bg-gradient-to-br from-red-50 to-rose-100 p-6 rounded-lg shadow-xl border-t-4 border-red-500">
                        <h3 class="text-2xl font-bold text-center text-red-800 mb-4">জাহান্নাম: চিরস্থায়ী শাস্তি</h3>
                        <p class="text-center text-gray-700">আর যারা বাম হাতে আমলনামা পাবে, তারা আর্তনাদ করে বলবে, "হায়! আমাকে যদি আমার আমলনামা না দেওয়া হতো!" তাদের চেহারা হবে ধূলিমলিন ও অন্ধকারাচ্ছন্ন। তাদের সম্পদ ও ক্ষমতা কোনো কাজেই আসবে না।</p>
                    </div>
                </div>
            </section>

            <section id="s7" class="scroll-mt-20">
                <div class="text-center mb-8">
                    <h2 class="text-2xl md:text-3xl font-bold text-teal-700">৭. মুক্তির পথ</h2>
                    <p class="mt-2 text-gray-600 max-w-3xl mx-auto">
                        জীবনের এই কঠিন যাত্রাপথে সফল হওয়ার এবং চূড়ান্ত মুক্তি লাভের উপায় কী? ইসলাম একটি স্পষ্ট এবং সরল পথ বাতলে দিয়েছে। এই বিভাগে আমরা সেই মুক্তির পথ সম্পর্কে জানব, যা দুনিয়ার পরীক্ষায় উত্তীর্ণ হয়ে পরকালে আল্লাহর সন্তুষ্টি অর্জনের দিকে নিয়ে যায়।
                    </p>
                </div>
                <div class="bg-white p-8 rounded-lg shadow-lg">
                    <div class="flex flex-col items-center text-center mb-8">
                        <div class="w-full h-1 bg-gray-300 relative mb-4">
                           <div class="w-1/3 h-1 bg-yellow-500 absolute left-1/2 top-0 -translate-x-1/2"></div>
                           <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-5xl">➡️</div>
                        </div>
                        <h3 class="text-xl font-bold text-gray-800">অনুসরণ করুন 'সিরাত আল-মুস্তাকিম'</h3>
                        <p class="text-gray-600 mt-2 max-w-xl">আল্লাহ বলেন, "আর এটিই আমার সরল পথ। সুতরাং তোমরা তার অনুসরণ করো এবং অন্যান্য পথ অনুসরণ করো না, যা তোমাদেরকে তাঁর পথ থেকে বিচ্ছিন্ন করে দেবে।" [সূরা আল-আন'আম: ১৫৩]</p>
                    </div>

                    <div class="mt-10 pt-8 border-t border-gray-200">
                         <h3 class="text-xl font-bold text-gray-800 text-center">✨ আমার জন্য পরিকল্পনা তৈরি করুন</h3>
                         <p class="text-center text-gray-600 mt-2 mb-4 max-w-xl mx-auto">আপনি কোন বিষয়ে উন্নতি করতে চান তা লিখুন, আমি আপনাকে একটি সহজ পরিকল্পনা তৈরি করতে সাহায্য করব।</p>
                         <div class="max-w-xl mx-auto">
                            <textarea id="amal-input" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500" rows="3" placeholder="যেমন: আমি ভোরে ঘুম থেকে উঠতে চাই..."></textarea>
                            <div class="text-center mt-4">
                               <button id="amal-generator-btn" class="gemini-button bg-yellow-500 text-white font-bold py-2 px-5 rounded-lg shadow-md hover:bg-yellow-600">পরিকল্পনা তৈরি করুন</button>
                            </div>
                         </div>
                    </div>
                </div>
            </section>

        </div>
    </main>

    <footer class="bg-gray-800 text-white mt-20">
        <div class="container mx-auto px-4 py-6 text-center text-sm">
            <p>&copy; 2025 জীবনের যাত্রা। শেখ খালিদ আল-রাশেদের খুতবার উপর ভিত্তি করে নির্মিত একটি শিক্ষামূলক উপস্থাপনা।</p>
        </div>
    </footer>
    
    <!-- Gemini Modal -->
    <div id="gemini-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 hidden">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-md max-h-[80vh] flex flex-col">
            <div class="p-4 border-b flex justify-between items-center">
                <h3 id="modal-title" class="text-lg font-bold text-gray-800">আপনার ব্যক্তিগত বার্তা</h3>
                <button id="modal-close" class="text-gray-500 hover:text-gray-800">&times;</button>
            </div>
            <div id="modal-content" class="p-6 overflow-y-auto">
                <!-- Loader -->
                <div id="modal-loader" class="flex justify-center items-center py-10">
                    <div class="loader"></div>
                </div>
                <!-- Result -->
                <div id="modal-result" class="text-gray-700 whitespace-pre-wrap" style="font-family: 'Noto Sans Bengali', sans-serif;"></div>
            </div>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', function () {
            
            // Charts setup
            const worldlyLifeCtx = document.getElementById('worldlyLifeChart').getContext('2d');
            new Chart(worldlyLifeCtx, {
                type: 'line', data: { labels: ['শৈশব', 'যৌবন', 'সম্পদ ও শক্তি', 'বার্ধক্য', 'মৃত্যু'], datasets: [{ label: 'পার্থিব জীবনের মোহ', data: [10, 50, 100, 40, 0], borderColor: 'rgba(20, 120, 120, 0.8)', backgroundColor: 'rgba(20, 120, 120, 0.1)', fill: true, tension: 0.4 }] },
                options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: true, ticks: { display: false }, grid: { display: false } }, x: { ticks: { font: { family: "'Noto Sans Bengali', sans-serif" } } } }, plugins: { legend: { display: false }, tooltip: { callbacks: { label: function(context) { return context.dataset.label + ': ' + context.formattedValue; } } } } }
            });

            const graveStateCtx = document.getElementById('graveStateChart').getContext('2d');
            new Chart(graveStateCtx, {
                type: 'doughnut', data: { labels: ['জান্নাতের বাগান (সৎকর্মশীল)', 'জাহান্নামের গর্ত (পাপী)'], datasets: [{ label: 'কবরের অবস্থা', data: [50, 50], backgroundColor: ['rgba(16, 185, 129, 0.7)', 'rgba(220, 38, 38, 0.7)'], borderColor: ['rgba(16, 185, 129, 1)', 'rgba(220, 38, 38, 1)'], borderWidth: 1 }] },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom', labels: { font: { family: "'Noto Sans Bengali', sans-serif", size: 14 } } }, tooltip: { bodyFont: { family: "'Noto Sans Bengali', sans-serif" }, titleFont: { family: "'Noto Sans Bengali', sans-serif" } } } }
            });
            
            // Navigation scroll spy
            const sections = document.querySelectorAll('section');
            const navLinks = document.querySelectorAll('.nav-link');
            const observer = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        navLinks.forEach(link => {
                            link.classList.remove('active');
                            if (link.getAttribute('href').substring(1) === entry.target.id) {
                                link.classList.add('active');
                            }
                        });
                    }
                });
            }, { root: null, rootMargin: '0px', threshold: 0.4 });
            sections.forEach(section => observer.observe(section));

            // Gemini API Integration
            const modal = document.getElementById('gemini-modal');
            const modalCloseBtn = document.getElementById('modal-close');
            const modalTitle = document.getElementById('modal-title');
            const modalLoader = document.getElementById('modal-loader');
            const modalResult = document.getElementById('modal-result');

            const showModal = () => modal.classList.remove('hidden');
            const hideModal = () => modal.classList.add('hidden');
            
            modalCloseBtn.addEventListener('click', hideModal);
            modal.addEventListener('click', (e) => {
                if(e.target === modal) hideModal();
            });

            const prompts = {
                worldly_life: "ইসলামের দৃষ্টিতে পার্থিব জীবন একটি ক্ষণস্থায়ী পরীক্ষা। এই বিষয়ে চিন্তা করে আমাকে আল্লাহর কাছে সাহায্য চাওয়ার জন্য একটি সংক্ষিপ্ত, আন্তরিক ও ব্যক্তিগত দোয়া তৈরি করে দিন। দোয়াটি যেন বাংলায় হয়।",
                grave: "ইসলামের বিশ্বাস অনুযায়ী কবর পরকালের প্রথম ধাপ এবং এটি খুবই কঠিন একটি জায়গা। কবরের শাস্তি থেকে মুক্তি এবং শান্তি লাভের জন্য আল্লাহর কাছে সাহায্য চেয়ে একটি বিনীত ও আকুতিপূর্ণ দোয়া বাংলায় তৈরি করুন।",
                judgement: "কেয়ামতের দিনের ভয়াবহতা এবং চূড়ান্ত বিচারের কথা স্মরণ করে, আল্লাহর রহমত ও ক্ষমা লাভের জন্য একটি শক্তিশালী এবং আবেগঘন দোয়া বাংলায় তৈরি করে দিন।"
            };

            const duaButtons = document.querySelectorAll('.dua-generator');
            duaButtons.forEach(button => {
                button.addEventListener('click', async () => {
                    const context = button.dataset.context;
                    const promptText = prompts[context];
                    if (!promptText) return;
                    
                    modalTitle.textContent = "আপনার জন্য একটি দোয়া...";
                    modalResult.textContent = '';
                    modalLoader.style.display = 'flex';
                    showModal();

                    try {
                        const resultText = await generateTextFromGemini(promptText);
                        modalResult.textContent = resultText;
                    } catch (error) {
                        modalResult.textContent = 'দুঃখিত, এই মুহূর্তে একটি সমস্যা হয়েছে। অনুগ্রহ করে আবার চেষ্টা করুন।';
                        console.error('Gemini API Error:', error);
                    } finally {
                        modalLoader.style.display = 'none';
                    }
                });
            });

            // Amal Planner
            const amalInput = document.getElementById('amal-input');
            const amalGeneratorBtn = document.getElementById('amal-generator-btn');

            amalGeneratorBtn.addEventListener('click', async () => {
                const userGoal = amalInput.value.trim();
                if (!userGoal) {
                    alert('অনুগ্রহ করে আপনার লক্ষ্য লিখুন।');
                    return;
                }

                const promptText = `একজন ইসলামিক মেন্টর হিসেবে, আমার এই লক্ষ্যটি অর্জনের জন্য একটি সহজ, ৩-ধাপের অনুপ্রেরণামূলক কর্ম-পরিকল্পনা তৈরি করে দিন। লক্ষ্যটি হলো: "${userGoal}"। পরিকল্পনাটি যেন বাস্তবসম্মত এবং উৎসাহব্যঞ্জক হয়। উত্তরটি বাংলায় দিন।`;

                modalTitle.textContent = "আপনার ব্যক্তিগত কর্ম-পরিকল্পনা";
                modalResult.textContent = '';
                modalLoader.style.display = 'flex';
                showModal();

                 try {
                    const resultText = await generateTextFromGemini(promptText);
                    modalResult.textContent = resultText;
                } catch (error) {
                    modalResult.textContent = 'দুঃখিত, এই মুহূর্তে একটি সমস্যা হয়েছে। অনুগ্রহ করে আবার চেষ্টা করুন।';
                    console.error('Gemini API Error:', error);
                } finally {
                    modalLoader.style.display = 'none';
                }
            });

            async function generateTextFromGemini(prompt) {
                const apiKey = "AIzaSyBdOPNV9QsLtaDuiIAkfB3yBHvwyeAoHb4"; // Canvas will provide the key
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                
                const payload = {
                    contents: [{
                        parts: [{ text: prompt }]
                    }]
                };

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`API request failed with status ${response.status}`);
                }
                
                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts && result.candidates[0].content.parts.length > 0) {
                    return result.candidates[0].content.parts[0].text;
                } else {
                    throw new Error('Unexpected API response structure');
                }
            }
        });
    </script>

</body>
</html>
