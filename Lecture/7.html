<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ржЖржмрзЗржжрзАржирзЗрж░ ржкрже | The Path of the Devout</title>
    <!-- Chosen Palette: Sacred Grove (Warm Neutrals with Muted Green/Teal Accents) -->
    <!-- Application Structure Plan: The SPA is designed as a single-page narrative journey that translates the spiritual lecture into an interactive experience. The structure is thematic, not linear, starting with the "Why" (the modern spiritual need) to create immediate relevance. It then defines the "Who" (qualities of the devout) using an interactive card grid. The core of the app is dedicated to the ultimate exemplar, Prophet Muhammad (я╖║), using a tabbed interface to explore different facets of his worship. This is followed by an interactive horizontal-scrolling gallery of "Echoes of Devotion" from pious predecessors, making the many stories digestible. The application concludes by bringing the message to the present day with a "Call to Action" for youth and a relatable modern story, culminating in the ultimate purpose and a final prayer. This structure was chosen to guide the user from intellectual understanding to heartfelt inspiration and personal action, using interactivity to maintain engagement with dense, narrative content. Gemini API features for personal dua generation and story analysis are added to deepen engagement. -->
    <!-- Visualization & Content Choices: Report Info: Qualities of the devout -> Goal: Organize/Inform -> Viz/Presentation: Interactive HTML grid with icons -> Interaction: Hover effects to highlight each quality -> Justification: Breaks down the core definition into clear, digestible parts. / Report Info: Different aspects of the Prophet's (я╖║) worship -> Goal: Organize/Compare -> Viz/Presentation: Tabbed content sections -> Interaction: Click to switch between facets of his devotion -> Justification: Allows focused exploration of a dense topic without overwhelming the user. / Report Info: Stories of pious predecessors -> Goal: Organize/Change -> Viz/Presentation: Horizontal scroll-snap gallery of cards -> Interaction: Scroll to navigate through stories, with a Gemini-powered button to generate lessons -> Justification: Presents a large number of anecdotes in a compact, engaging, and non-linear format, with an added layer of AI-powered reflection. All icons are Unicode characters, and layouts are built with Tailwind, confirming NO SVG/Mermaid. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Hind Siliguri', sans-serif;
        }
        .scroll-snap-x {
            scroll-snap-type: x mandatory;
        }
        .scroll-snap-align-center {
            scroll-snap-align: center;
        }
        .tab-active {
            border-color: #047857; /* emerald-600 */
            color: #047857;
            background-color: #d1fae5; /* emerald-100 */
        }
        .tab-inactive {
            border-color: transparent;
            color: #4b5563; /* gray-600 */
        }
        .loader {
            width: 24px;
            height: 24px;
            border: 3px solid #d1fae5; /* emerald-100 */
            border-bottom-color: #065f46; /* emerald-800 */
            border-radius: 50%;
            display: inline-block;
            box-sizing: border-box;
            animation: rotation 1s linear infinite;
        }
        @keyframes rotation {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }
    </style>
</head>
<body class="bg-stone-50 text-gray-800">

    <main class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-12">

        <!-- Header -->
        <header class="text-center mb-16">
            <h1 class="text-4xl md:text-5xl font-bold text-emerald-800 mb-4">ржЖржмрзЗржжрзАржирзЗрж░ ржкрже</h1>
            <p class="text-lg text-gray-600">ржЖрж▓рзНрж▓рж╛рж╣рж░ ржПржХржирж┐рж╖рзНржа ржЙржкрж╛рж╕ржХржжрзЗрж░ ржЬрзАржмржирзЗрж░ ржкрзНрж░рждрж┐ржЪрзНржЫржмрж┐</p>
            <div class="mt-6 text-xl md:text-2xl text-center max-w-3xl mx-auto text-stone-700 italic">
                <p>"ржЖржорж╛ржжрзЗрж░ ржЗржмрж╛ржжрждрзЗрж░ ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝рждрж╛ ржарж┐ржХ рждрзЗржоржи, ржпрзЗржоржи ржкрзГржерж┐ржмрзАрж░ ржЬржирзНржп ржмрзГрж╖рзНржЯрж┐рж░ ржкрзНрж░ржпрж╝рзЛржЬржи; ржЕржирзНрждрж░рзНржжрзГрж╖рзНржЯрж┐рж░ ржЬрзНржЮрж╛ржирзАрж░ рж╕рзНржорж░ржг ржЫрж╛ржбрж╝рж╛ ржЕржирзНрждрж░ ржмрзЗржБржЪрзЗ ржерж╛ржХрзЗ ржирж╛ред"</p>
            </div>
        </header>

        <!-- Section 1: The Foundation -->
        <section id="foundation" class="mb-20">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-emerald-700">ржнрж┐рждрзНрждрж┐: ржЖржмрзЗржжрзАржи ржХрж╛рж░рж╛?</h2>
                <p class="mt-2 text-gray-600">ржПржЗ ржмрж┐ржнрж╛ржЧржЯрж┐ ржЖржмрзЗржжрзАржи ржмрж╛ ржПржХржирж┐рж╖рзНржа ржЙржкрж╛рж╕ржХржжрзЗрж░ ржкрж░рж┐ржЪржпрж╝ ржПржмржВ рждрж╛ржжрзЗрж░ рж╕ржВржЬрзНржЮрж╛ржпрж╝рж┐ржд ржмрзИрж╢рж┐рж╖рзНржЯрзНржп рждрзБрж▓рзЗ ржзрж░рзЗред</p>
            </div>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Card 1: Detachment -->
                <div class="bg-white p-6 rounded-lg shadow-md border-t-4 border-emerald-500 hover:shadow-xl transition-shadow duration-300">
                    <div class="flex items-center mb-4">
                        <span class="text-3xl mr-4">ЁЯСР</span>
                        <h3 class="text-xl font-semibold text-emerald-800">ржжрзБржирж┐ржпрж╝рж╛ ржмрж┐ржорзБржЦрждрж╛</h3>
                    </div>
                    <p class="text-gray-700">рждрж╛ржБрж░рж╛ ржПржЗ ржкрзГржерж┐ржмрзАрж░ ржЪрж╛ржХржЪрж┐ржХрзНржп ржПржмржВ ржорзЛрж╣ ржерзЗржХрзЗ ржирж┐ржЬрзЗржжрзЗрж░ ржорзБржЦ ржлрж┐рж░рж┐ржпрж╝рзЗ ржирзЗржиред рждрж╛ржБржжрзЗрж░ ржЕржирзНрждрж░ ржЬрж╛ржЧрждрж┐ржХ ржмрж╕рзНрждрзБрж░ ржкрзНрж░рждрж┐ ржЖрж╕ржХрзНржд ржерж╛ржХрзЗ ржирж╛ред</p>
                </div>
                <!-- Card 2: Connection to Mosques -->
                <div class="bg-white p-6 rounded-lg shadow-md border-t-4 border-emerald-500 hover:shadow-xl transition-shadow duration-300">
                    <div class="flex items-center mb-4">
                        <span class="text-3xl mr-4">ЁЯХМ</span>
                        <h3 class="text-xl font-semibold text-emerald-800">ржорж╕ржЬрж┐ржжрзЗрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзЛржЧ</h3>
                    </div>
                    <p class="text-gray-700">рждрж╛ржБржжрзЗрж░ рж╣рзГржжржпрж╝ ржорж╕ржЬрж┐ржжрзЗрж░ рж╕рж╛ржерзЗ ржЬрзБржбрж╝рзЗ ржерж╛ржХрзЗред ржорж┐рж╣рж░рж╛ржмрзЗ рж╕рж┐ржЬржжрж╛ ржПржмржВ ржХрзНрж╖ржорж╛ ржкрзНрж░рж╛рж░рзНржержирж╛ рждрж╛ржБржжрзЗрж░ ржЬрзАржмржирзЗрж░ рж╕ржмржЪрзЗржпрж╝рзЗ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржЕржВрж╢ред</p>
                </div>
                <!-- Card 3: High Character -->
                <div class="bg-white p-6 rounded-lg shadow-md border-t-4 border-emerald-500 hover:shadow-xl transition-shadow duration-300">
                    <div class="flex items-center mb-4">
                        <span class="text-3xl mr-4">тЪЦя╕П</span>
                        <h3 class="text-xl font-semibold text-emerald-800">ржЙржЪрзНржЪ ржЪрж░рж┐рждрзНрж░</h3>
                    </div>
                    <p class="text-gray-700">ржЙрждрзНрждржо ржЖржЪрж░ржг, ржорж╣рзО рж╕ржЩрзНржЧ, ржЕрж╕рж╛ржзрж╛рж░ржг ржзрзИрж░рзНржп ржПржмржВ рж╕рж╣ржирж╢рзАрж▓рждрж╛ рждрж╛ржБржжрзЗрж░ ржЪрж░рж┐рждрзНрж░рзЗрж░ ржнрзВрж╖ржгред</p>
                </div>
                <!-- Card 4: Humility & Gratitude -->
                <div class="bg-white p-6 rounded-lg shadow-md border-t-4 border-emerald-500 hover:shadow-xl transition-shadow duration-300">
                    <div class="flex items-center mb-4">
                        <span class="text-3xl mr-4">ЁЯЩП</span>
                        <h3 class="text-xl font-semibold text-emerald-800">ржиржорзНрж░рждрж╛ ржУ ржХрзГрждржЬрзНржЮрждрж╛</h3>
                    </div>
                    <p class="text-gray-700">ржЕрж▓рзНржкрзЗрждрзЗ рждрж╛ржБрж░рж╛ ржзрзИрж░рзНржпрж╢рзАрж▓ ржПржмржВ ржмрзЗрж╢рж┐рждрзЗ рждрж╛ржБрж░рж╛ ржХрзГрждржЬрзНржЮред ржкрзНрж░рж╢ржВрж╕рж╛ ржмрж╛ ржирж┐ржирзНржжрж╛ рждрж╛ржБржжрзЗрж░ ржХрж╛ржЫрзЗ рж╕ржорж╛ржиред</p>
                </div>
                <!-- Card 5: Rarity & Value -->
                <div class="bg-white p-6 rounded-lg shadow-md border-t-4 border-emerald-500 hover:shadow-xl transition-shadow duration-300">
                     <div class="flex items-center mb-4">
                        <span class="text-3xl mr-4">ЁЯТО</span>
                        <h3 class="text-xl font-semibold text-emerald-800">ржмрж┐рж░рж▓рждрж╛ ржУ ржорзВрж▓рзНржп</h3>
                    </div>
                    <p class="text-gray-700">рждрж╛ржБрж░рж╛ рж╕ржорж╛ржЬрзЗ ржжрзБрж░рзНрж▓ржн ржорзБржжрзНрж░рж╛рж░ ржорждрзЛред ржПржХрж╢ржд ржЙржЯрзЗрж░ ржоржзрзНржпрзЗ ржпрзЗржоржи ржПржХржЯрж┐ ржирж┐ржЦрзБржБржд ржмрж╛рж╣ржи ржЦрзБржБржЬрзЗ ржкрж╛ржУржпрж╝рж╛ ржХржарж┐ржи, рждрж╛ржБрж░рж╛ржУ рждрзЗржоржирж┐ ржмрж┐рж░рж▓ ржУ ржорзВрж▓рзНржпржмрж╛ржиред</p>
                </div>
                 <!-- Card 6: Tears of Remembrance -->
                <div class="bg-white p-6 rounded-lg shadow-md border-t-4 border-emerald-500 hover:shadow-xl transition-shadow duration-300">
                     <div class="flex items-center mb-4">
                        <span class="text-3xl mr-4">ЁЯТз</span>
                        <h3 class="text-xl font-semibold text-emerald-800">рж╕рзНржорж░ржгрзЗрж░ ржЕрж╢рзНрж░рзБ</h3>
                    </div>
                    <p class="text-gray-700">рждрж╛ржБржжрзЗрж░ ржХрж╛ржирзНржирж╛ ржЬрж╛ржЧрждрж┐ржХ ржжрзБржГржЦрзЗрж░ ржЬржирзНржп ржиржпрж╝, ржмрж░ржВ ржЖрж▓рзНрж▓рж╛рж╣рж░ ржнржпрж╝рзЗ ржПржмржВ ржЖржЦрзЗрж░рж╛рждрзЗрж░ рж╕рзНржорж░ржгрзЗред</p>
                </div>
            </div>
        </section>

        <!-- Section 2: The Ultimate Exemplar -->
        <section id="exemplar" class="mb-20 bg-emerald-50/50 rounded-lg p-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-emerald-700">рж╕рж░рзНржмрж╢рзНрж░рзЗрж╖рзНржа ржЖржжрж░рзНрж╢: ржиржмрзА ржорзБрж╣рж╛ржорзНржоржж (я╖║)-ржПрж░ ржЗржмрж╛ржжржд</h2>
                <p class="mt-2 text-gray-600">ржЖржмрзЗржжрзАржирзЗрж░ ржЧрзБржгрж╛ржмрж▓рзАрж░ ржирж┐ржЦрзБржБржд ржкрзНрж░рждрж┐ржЪрзНржЫржмрж┐ ржЫрж┐рж▓рзЗржи ржЖржорж╛ржжрзЗрж░ ржкрзНрж░рж┐ржпрж╝ ржиржмрзА (я╖║)ред ржПржЗ ржмрж┐ржнрж╛ржЧрзЗ рждрж╛ржБрж░ ржЗржмрж╛ржжрждрзЗрж░ ржХрзЯрзЗржХржЯрж┐ ржжрж┐ржХ рждрзБрж▓рзЗ ржзрж░рж╛ рж╣рж▓рзЛ, ржпрж╛ ржЖржорж╛ржжрзЗрж░ ржЬржирзНржп ржЕржирзБржкрзНрж░рзЗрж░ржгрж╛рж░ ржЙрзОрж╕ред</p>
            </div>
            <div>
                <div class="border-b border-gray-200 mb-6">
                    <nav id="tabs" class="-mb-px flex justify-center space-x-2 sm:space-x-8" aria-label="Tabs">
                        <button data-tab="tab1" class="tab-btn whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm sm:text-base tab-active">
                            ржЕржмрж┐рж░рж╛ржо рж╕рж╛рж▓рж╛ржд
                        </button>
                        <button data-tab="tab2" class="tab-btn whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm sm:text-base tab-inactive">
                            ржХрзНрж░ржирзНржжржирж░ржд рж╣рзГржжржпрж╝
                        </button>
                        <button data-tab="tab3" class="tab-btn whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm sm:text-base tab-inactive">
                            ржЕржмрж┐ржЪрж▓ ржЕржЩрзНржЧрзАржХрж╛рж░
                        </button>
                    </nav>
                </div>
                <div id="tab-content" class="mt-8">
                    <!-- Tab 1 Content -->
                    <div id="tab1" class="tab-pane">
                        <h3 class="text-2xl font-semibold text-center text-emerald-800 mb-4">ржХрзГрждржЬрзНржЮ ржмрж╛ржирзНржжрж╛рж░ ржкрзНрж░рж╛рж░рзНржержирж╛</h3>
                        <p class="text-center max-w-2xl mx-auto text-gray-700">рж░рж╛рж╕рзВрж▓рзБрж▓рзНрж▓рж╛рж╣ (я╖║) ржПржд ржжрзАрж░рзНржШ рж╕ржоржпрж╝ ржзрж░рзЗ ржирж╛ржорж╛ржЬрзЗ ржжрж╛ржБржбрж╝рж╛рждрзЗржи ржпрзЗ рждрж╛ржБрж░ ржкрж╛ ржлрзБрж▓рзЗ ржпрзЗрждред ржпржЦржи рждрж╛ржБржХрзЗ ржЬрж┐ржЬрзНржЮрзЗрж╕ ржХрж░рж╛ рж╣рж▓рзЛ ржХрзЗржи рждрж┐ржирж┐ ржПржд ржХрж╖рзНржЯ ржХрж░рзЗржи, ржЕржержЪ ржЖрж▓рзНрж▓рж╛рж╣ рждрж╛ржБрж░ рж╕ржорж╕рзНржд ржЧрзБржирж╛рж╣ ржХрзНрж╖ржорж╛ ржХрж░рзЗ ржжрж┐ржпрж╝рзЗржЫрзЗржи, рждрж┐ржирж┐ ржЙрждрзНрждрж░ ржжрж┐рж▓рзЗржи:</p>
                        <blockquote class="text-center text-2xl font-semibold text-emerald-600 italic my-6 p-4 bg-emerald-100 rounded-lg">
                            "╪г┘Б┘Д╪з ╪г┘Г┘И┘Ж ╪╣╪и╪п╪з┘Л ╪┤┘Г┘И╪▒╪з┘Л╪Я" <br> (ржЖржорж┐ ржХрж┐ ржПржХржЬржи ржХрзГрждржЬрзНржЮ ржмрж╛ржирзНржжрж╛ рж╣ржм ржирж╛?)
                        </blockquote>
                        <p class="text-center max-w-2xl mx-auto text-gray-700">рждрж╛ржБрж░ ржЗржмрж╛ржжржд ржЫрж┐рж▓ ржнржпрж╝ ржмрж╛ ржмрж╛ржзрзНржпржмрж╛ржзржХрждрж╛ ржерзЗржХрзЗ ржиржпрж╝, ржмрж░ржВ ржЖрж▓рзНрж▓рж╛рж╣рж░ ржкрзНрж░рждрж┐ ржЕрж╕рзАржо ржнрж╛рж▓рзЛржмрж╛рж╕рж╛ ржПржмржВ ржХрзГрждржЬрзНржЮрждрж╛рж░ ржкрзНрж░ржХрж╛рж╢ред</p>
                    </div>
                    <!-- Tab 2 Content -->
                    <div id="tab2" class="tab-pane hidden">
                         <h3 class="text-2xl font-semibold text-center text-emerald-800 mb-4">ржЧрж▓рж┐ржд рж╣рзГржжржпрж╝рзЗрж░ ржХрж╛ржирзНржирж╛</h3>
                        <p class="text-center max-w-2xl mx-auto text-gray-700">рждрж╛ржБрж░ ржЗржмрж╛ржжрждрзЗ ржЖржмрзЗржЧ ржПрждржЯрж╛ржЗ ржЧржнрзАрж░ ржЫрж┐рж▓ ржпрзЗ рждрж╛ рж╢рж╛рж░рзАрж░рж┐ржХржнрж╛ржмрзЗ ржкрзНрж░ржХрж╛рж╢ ржкрзЗрждред ржПржХржЬржи рж╕рж╛рж╣рж╛ржмрзА ржмрж░рзНржгржирж╛ ржХрж░рзЗржи:</p>
                         <blockquote class="text-center text-xl font-medium text-emerald-600 italic my-6 p-4 bg-emerald-100 rounded-lg">
                            "ржЖржорж┐ рж░рж╛рж╕рзВрж▓рзБрж▓рзНрж▓рж╛рж╣ (я╖║)-ржПрж░ ржХрж╛ржЫрзЗ ржПрж▓рж╛ржо ржпржЦржи рждрж┐ржирж┐ ржирж╛ржорж╛ржЬ ржкржбрж╝ржЫрж┐рж▓рзЗржи, ржПржмржВ ржХрж╛ржирзНржирж╛рж░ ржХрж╛рж░ржгрзЗ рждрж╛ржБрж░ ржмрзБржХ ржерзЗржХрзЗ ржлрзБржЯржирзНржд ржкрж╛рждрзНрж░рзЗрж░ ржорждрзЛ рж╢ржмрзНржж рж╣ржЪрзНржЫрж┐рж▓ред"
                        </blockquote>
                        <p class="text-center max-w-2xl mx-auto text-gray-700">ржПржЯрж┐ ржЫрж┐рж▓ ржЖрж▓рзНрж▓рж╛рж╣рж░ ржЙржкрж╕рзНржерж┐рждрж┐рждрзЗ рж╕ржорзНржкрзВрж░рзНржгрж░рзВржкрзЗ ржирж┐ржоржЧрзНржи ржПржХржЯрж┐ рж╣рзГржжржпрж╝рзЗрж░ ржкрзНрж░рждрж┐ржЪрзНржЫржмрж┐, ржпрж╛ ржХрзЗржмрж▓ ржнржпрж╝рзЗ ржиржпрж╝, ржмрж░ржВ ржорж╣ржмрзНржмрждрзЗ ржХрзНрж░ржирзНржжржирж░ржд ржЫрж┐рж▓ред</p>
                    </div>
                    <!-- Tab 3 Content -->
                    <div id="tab3" class="tab-pane hidden">
                        <h3 class="text-2xl font-semibold text-center text-emerald-800 mb-4">рж╕рж░рзНржмрж╛ржмрж╕рзНржерж╛ржпрж╝ ржЗржмрж╛ржжржд</h3>
                        <p class="text-center max-w-2xl mx-auto text-gray-700">рждрж╛ржБрж░ ржирж┐рж╖рзНржарж╛ ржХрзЛржирзЛ ржЕржмрж╕рзНржерж╛рждрзЗржЗ ржХржорзЗржирж┐ред ржпрзБржжрзНржзржХрзНрж╖рзЗрждрзНрж░ ржерзЗржХрзЗ рж╢рзБрж░рзБ ржХрж░рзЗ ржорзГрждрзНржпрзБрж╢ржпрзНржпрж╛ ржкрж░рзНржпржирзНржд, ржЗржмрж╛ржжржд ржЫрж┐рж▓ рждрж╛ржБрж░ ╪з┘И┘Д█М┘Ж ржЕржЧрзНрж░рж╛ржзрж┐ржХрж╛рж░ред</p>
                        <div class="grid md:grid-cols-2 gap-6 mt-6">
                            <div class="bg-white p-4 rounded-lg border border-emerald-200">
                                <h4 class="font-bold text-emerald-700">ржпрзБржжрзНржзрзЗрж░ ржоржпрж╝ржжрж╛ржирзЗ</h4>
                                <p class="text-sm text-gray-600">ржнржпрж╝ржЩрзНржХрж░ ржпрзБржжрзНржзрзЗрж░ рж╕ржоржпрж╝ржУ рждрж┐ржирж┐ ржЬрж╛ржорж╛рждрзЗ 'рж╕рж╛рж▓рж╛рждрзБрж▓ ржЦрж╛ржЙржл' (ржнржпрж╝рзЗрж░ ржирж╛ржорж╛ржЬ) ржЖржжрж╛ржпрж╝ ржХрж░рж╛рж░ ржмрзНржпржмрж╕рзНржерж╛ ржХрж░рзЗржЫрж┐рж▓рзЗржи, ржпрж╛ ржкрзНрж░ржорж╛ржг ржХрж░рзЗ ржпрзЗ ржХрзЛржирзЛ ржкрж░рж┐рж╕рзНржерж┐рждрж┐рждрзЗржЗ ржирж╛ржорж╛ржЬ рждрзНржпрж╛ржЧржпрзЛржЧрзНржп ржиржпрж╝ред</p>
                            </div>
                             <div class="bg-white p-4 rounded-lg border border-emerald-200">
                                <h4 class="font-bold text-emerald-700">ржорзГрждрзНржпрзБрж╢ржпрзНржпрж╛ржпрж╝</h4>
                                <p class="text-sm text-gray-600">рж╢рзЗрж╖ ржЕрж╕рзБрж╕рзНржерждрж╛рж░ рж╕ржоржпрж╝ ржкрзНрж░ржЪржгрзНржб ржЬрзНржмрж░рзЗ ржмрж╛рж░ржмрж╛рж░ ржЕржЬрзНржЮрж╛ржи рж╣ржпрж╝рзЗ ржпрж╛ржУржпрж╝рж╛рж░ ржкрж░рзЗржУ рждрж┐ржирж┐ ржЬрж┐ржЬрзНржЮрзЗрж╕ ржХрж░рждрзЗржи ржорж╛ржирзБрж╖ ржирж╛ржорж╛ржЬ ржкржбрж╝рзЗржЫрзЗ ржХрж┐ржирж╛ред ржЕржмрж╢рзЗрж╖рзЗ, рждрж╛ржБржХрзЗ ржжрзБржЬржи рж╕рж╛рж╣рж╛ржмрзАрж░ ржХрж╛ржБржзрзЗ ржнрж░ ржХрж░рзЗ ржорж╕ржЬрж┐ржжрзЗ ржирж┐ржпрж╝рзЗ ржпрж╛ржУржпрж╝рж╛ рж╣ржпрж╝рзЗржЫрж┐рж▓, ржпржЦржи ржмрзНржпржерж╛ржпрж╝ рждрж╛ржБрж░ ржкрж╛ ржорж╛ржЯрж┐рждрзЗ рж╣рзЗржБржЪржбрж╝рзЗ ржпрж╛ржЪрзНржЫрж┐рж▓ред</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>


        <!-- Section 3: Echoes of Devotion -->
        <section id="echoes" class="mb-20">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-emerald-700">ржирж┐рж╖рзНржарж╛рж░ ржкрзНрж░рждрж┐ржзрзНржмржирж┐</h2>
                <p class="mt-2 text-gray-600 max-w-3xl mx-auto">ржиржмрзА (я╖║)-ржПрж░ ржЖржжрж░рзНрж╢рзЗ ржЕржирзБржкрзНрж░рж╛ржгрж┐ржд рж╣ржпрж╝рзЗ ржкрзБржгрзНржпржмрж╛ржи ржкрзВрж░рзНржмрж╕рзВрж░рзАрж░рж╛ ржЗржмрж╛ржжрждрзЗ ржПржоржи рж╕ржм ржжрзГрж╖рзНржЯрж╛ржирзНржд рж╕рзНржерж╛ржкржи ржХрж░рзЗржЫрзЗржи ржпрж╛ ржЖржорж╛ржжрзЗрж░ ржХрж▓рзНржкржирж╛ржХрзЗржУ рж╣рж╛рж░ ржорж╛ржирж╛ржпрж╝ред рждрж╛ржБржжрзЗрж░ ржЧрж▓рзНржкржЧрзБрж▓рзЛ ржЖржорж╛ржжрзЗрж░ ржЬржирзНржп ржЖржзрзНржпрж╛рждрзНржорж┐ржХ ржмрж╛рждрж┐ржШрж░ред</p>
            </div>
            <div class="relative">
                <div class="flex overflow-x-auto scroll-snap-x pb-4 -mx-4 px-4 gap-6">
                    <!-- Story 1 -->
                    <div class="flex-shrink-0 w-11/12 sm:w-1/2 lg:w-1/3 scroll-snap-align-center">
                        <div class="bg-white rounded-lg shadow-lg p-6 h-full flex flex-col justify-between">
                            <div>
                                <h4 class="text-lg font-bold text-emerald-700 mb-2">ржЕржмрзНржпрж░рзНрже рж╕рж╛рж▓рж╛ржд</h4>
                                <p class="text-gray-600 text-sm mb-4 story-text">рж╕рж╛'ржИржж ржЗржмржирзБрж▓ ржорзБрж╕рж╛ржЗржпрж╝рж┐ржм (рж░рж╣ржГ) ржмрж▓рзЗржи, "ржкржЮрзНржЪрж╛рж╢ ржмржЫрж░ ржзрж░рзЗ ржЖржорж╛рж░ ржкрзНрж░ржержо рждрж╛ржХржмрзАрж░ ржЫрзБржЯрзЗ ржпрж╛ржпрж╝ржирж┐ ржПржмржВ ржЖржорж┐ ржкржЮрзНржЪрж╛рж╢ ржмржЫрж░ ржзрж░рзЗ ржирж╛ржорж╛ржЬрзЗ ржХрж╛рж░рзЛ ржкрж┐ржарзЗрж░ ржжрж┐ржХрзЗ рждрж╛ржХрж╛ржЗржирж┐ред"</p>
                                <div class="text-right font-medium text-emerald-800 mb-4">~ рж╕рж╛'ржИржж ржЗржмржирзБрж▓ ржорзБрж╕рж╛ржЗржпрж╝рж┐ржм</div>
                                <div class="story-lessons mt-4"></div>
                            </div>
                            <button class="generate-lesson-btn mt-4 w-full bg-emerald-50 text-emerald-700 font-semibold py-2 px-4 rounded-lg hover:bg-emerald-100 transition-colors duration-300 flex items-center justify-center space-x-2">
                                <span>тЬи ржЧрж▓рзНржк ржерзЗржХрзЗ рж╢рж┐ржХрзНрж╖рж╛</span>
                                <span class="loader hidden"></span>
                            </button>
                        </div>
                    </div>
                    <!-- Story 2 -->
                    <div class="flex-shrink-0 w-11/12 sm:w-1/2 lg:w-1/3 scroll-snap-align-center">
                         <div class="bg-white rounded-lg shadow-lg p-6 h-full flex flex-col justify-between">
                            <div>
                                <h4 class="text-lg font-bold text-emerald-700 mb-2">ржХрзНрж▓рж╛ржирзНрждрж┐рж╣рзАржи рж╕рж┐ржЬржжрж╛</h4>
                                <p class="text-gray-600 text-sm mb-4 story-text">ржорж╛рж╕рж░рзБржХ (рж░рж╣ржГ)-ржПрж░ рж╕рзНрждрзНрж░рзА ржмрж▓рзЗржи, рждрж┐ржирж┐ рж░рж╛рждрзЗ ржПржд ржжрзАрж░рзНржШ ржирж╛ржорж╛ржЬ ржкржбрж╝рждрзЗржи ржпрзЗ рждрж╛ржБрж░ ржкрж╛ ржлрзБрж▓рзЗ ржпрзЗржд ржПржмржВ ржирж╛ржорж╛ржЬ рж╢рзЗрж╖рзЗ ржжрзБрж░рзНржмрж▓рждрж╛рж░ ржХрж╛рж░ржгрзЗ ржЙржЯрзЗрж░ ржорждрзЛ рж╣рж╛ржорж╛ржЧрзБржбрж╝рж┐ ржжрж┐ржпрж╝рзЗ ржЪрж▓рждрзЗ рж╣рждрзЛред</p>
                                <div class="text-right font-medium text-emerald-800 mb-4">~ ржорж╛рж╕рж░рзБржХ (рж░рж╣ржГ)</div>
                                <div class="story-lessons mt-4"></div>
                            </div>
                            <button class="generate-lesson-btn mt-4 w-full bg-emerald-50 text-emerald-700 font-semibold py-2 px-4 rounded-lg hover:bg-emerald-100 transition-colors duration-300 flex items-center justify-center space-x-2">
                                <span>тЬи ржЧрж▓рзНржк ржерзЗржХрзЗ рж╢рж┐ржХрзНрж╖рж╛</span>
                                <span class="loader hidden"></span>
                            </button>
                        </div>
                    </div>
                    <!-- Story 3 -->
                    <div class="flex-shrink-0 w-11/12 sm:w-1/2 lg:w-1/3 scroll-snap-align-center">
                        <div class="bg-white rounded-lg shadow-lg p-6 h-full flex flex-col justify-between">
                            <div>
                                <h4 class="text-lg font-bold text-emerald-700 mb-2">ржорзГрждрзНржпрзБрж╢ржпрзНржпрж╛ржпрж╝ рж╕рж╛рж▓рж╛ржд</h4>
                                <p class="text-gray-600 text-sm mb-4 story-text">ржорзГрждрзНржпрзБрж╢ржпрзНржпрж╛ржпрж╝ ржерж╛ржХрж╛ ржЖржмрзБ ржЖржмржж ржЖрж▓-рж░рж╣ржорж╛ржи ржЖрж▓-рж╕рзБрж▓рж╛ржорж┐ржХрзЗ ржпржЦржи ржШрж░рзЗ ржирж┐ржпрж╝рзЗ ржпрж╛ржУржпрж╝рж╛рж░ ржкрзНрж░рж╕рзНрждрж╛ржм ржжрзЗржУржпрж╝рж╛ рж╣рж▓рзЛ, рждрж┐ржирж┐ ржкрзНрж░рждрзНржпрж╛ржЦрзНржпрж╛ржи ржХрж░рзЗ ржмрж▓рж▓рзЗржи, "ржЖржорж┐ ржЖржорж╛рж░ ржорж╕ржЬрж┐ржжрзЗржЗ ржорж░рждрзЗ ржЪрж╛ржЗ," ржХрж╛рж░ржг ржлрзЗрж░рзЗрж╢рждрж╛рж░рж╛ ржирж╛ржорж╛ржЬрзАрж░ ржЬржирзНржп ржжрзЛржпрж╝рж╛ ржХрж░рзЗржиред</p>
                                <div class="text-right font-medium text-emerald-800 mb-4">~ ржЖржмрзБ ржЖржмржж ржЖрж▓-рж░рж╣ржорж╛ржи ржЖрж▓-рж╕рзБрж▓рж╛ржорж┐</div>
                                <div class="story-lessons mt-4"></div>
                            </div>
                            <button class="generate-lesson-btn mt-4 w-full bg-emerald-50 text-emerald-700 font-semibold py-2 px-4 rounded-lg hover:bg-emerald-100 transition-colors duration-300 flex items-center justify-center space-x-2">
                                <span>тЬи ржЧрж▓рзНржк ржерзЗржХрзЗ рж╢рж┐ржХрзНрж╖рж╛</span>
                                <span class="loader hidden"></span>
                            </button>
                        </div>
                    </div>
                     <!-- Story 4 -->
                    <div class="flex-shrink-0 w-11/12 sm:w-1/2 lg:w-1/3 scroll-snap-align-center">
                        <div class="bg-white rounded-lg shadow-lg p-6 h-full flex flex-col justify-between">
                            <div>
                                <h4 class="text-lg font-bold text-emerald-700 mb-2">рж╕рж╣рж╕рзНрж░ рж░рж╛ржХрж╛рждрзЗрж░ ржирж╛ржорж╛ржЬрзА</h4>
                                <p class="text-gray-600 text-sm mb-4 story-text">ржорзБрж░рж░рж╛рж╣ ржЖрж▓-рж╣рж╛ржоржжрж╛ржирж┐ ржкрзНрж░рждрж┐ржжрж┐ржи ржПржХ рж╣рж╛ржЬрж╛рж░ рж░рж╛ржХрж╛ржд ржирж╛ржорж╛ржЬ ржкржбрж╝рждрзЗржиред рждрж╛ржБрж░ рж╕рж┐ржЬржжрж╛рж░ рж╕рзНржерж╛ржиржЯрж┐ ржЙржЯрзЗрж░ ржмрж┐рж╢рзНрж░рж╛ржорзЗрж░ рж╕рзНржерж╛ржирзЗрж░ ржорждрзЛ ржХрзНрж╖ржпрж╝рзЗ ржЧрж┐ржпрж╝рзЗржЫрж┐рж▓ред</p>
                                <div class="text-right font-medium text-emerald-800 mb-4">~ ржорзБрж░рж░рж╛рж╣ ржЖрж▓-рж╣рж╛ржоржжрж╛ржирж┐</div>
                                <div class="story-lessons mt-4"></div>
                            </div>
                             <button class="generate-lesson-btn mt-4 w-full bg-emerald-50 text-emerald-700 font-semibold py-2 px-4 rounded-lg hover:bg-emerald-100 transition-colors duration-300 flex items-center justify-center space-x-2">
                                <span>тЬи ржЧрж▓рзНржк ржерзЗржХрзЗ рж╢рж┐ржХрзНрж╖рж╛</span>
                                <span class="loader hidden"></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 4: Call to Action -->
        <section id="call-to-action" class="mb-20">
             <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-emerald-700">ржЖржорж╛ржжрзЗрж░ рж╕ржоржпрж╝рзЗрж░ ржЬржирзНржп ржЖржоржирзНрждрзНрж░ржг</h2>
                <p class="mt-2 text-gray-600">ржЕрждрзАрждрзЗрж░ ржЙржжрж╛рж╣рж░ржгржЧрзБрж▓рзЛ ржЖржорж╛ржжрзЗрж░ ржЬржирзНржп рдкреНрд░реЗрд░рдгрд╛, ржХрж┐ржирзНрждрзБ ржПржЗ ржкрже ржЖржорж╛ржжрзЗрж░ ржпрзБржЧрзЗржУ ржЦрзЛрж▓рж╛ ржЖржЫрзЗред</p>
            </div>
            <div class="grid md:grid-cols-2 gap-8 items-start">
                <div class="bg-white p-8 rounded-lg shadow-lg">
                    <h3 class="text-2xl font-bold text-emerald-800 mb-4">ржпрзБржмржХржжрзЗрж░ ржкрзНрж░рждрж┐ ржЖрж╣рзНржмрж╛ржи</h3>
                    <p class="text-gray-700 mb-4">ржпрзМржмржи рж╣рж▓рзЛ ржЗржмрж╛ржжрждрзЗрж░ рж╢ржХрзНрждрж┐ ржУ рж╕рж╛ржорж░рзНржерзНржпрзЗрж░ рж╕ржоржпрж╝ред ржПржЯрж┐ ржПржХ ржХрзНрж╖ржгрж╕рзНржерж╛ржпрж╝рзА ржЕрждрж┐ржерж┐ред рж░рж╛рж╕рзВрж▓рзБрж▓рзНрж▓рж╛рж╣ (я╖║) ржмрж▓рзЗржЫрзЗржи:</p>
                    <blockquote class="border-l-4 border-emerald-500 pl-4 italic text-gray-600 my-4">
                        "ржкрж╛ржБржЪржЯрж┐ ржЬрж┐ржирж┐рж╕ржХрзЗ ржкрж╛ржБржЪржЯрж┐ ржЬрж┐ржирж┐рж╕рзЗрж░ ржЖржЧрзЗ ╪║┘Ж█М┘Е╪к ржоржирзЗ ржХрж░рзЛ: рждрзЛржорж╛рж░ ржпрзМржмржиржХрзЗ ржмрж╛рж░рзНржзржХрзНржпрзЗрж░ ржЖржЧрзЗ, рж╕рзБрж╕рзНржерждрж╛ржХрзЗ ржЕрж╕рзБрж╕рзНржерждрж╛рж░ ржЖржЧрзЗ, рж╕ржЪрзНржЫрж▓рждрж╛ржХрзЗ ржжрж╛рж░рж┐ржжрзНрж░рзНржпрзЗрж░ ржЖржЧрзЗ, ржЕржмрж╕рж░ржХрзЗ ржмрзНржпрж╕рзНрждрждрж╛рж░ ржЖржЧрзЗ ржПржмржВ ржЬрзАржмржиржХрзЗ ржорзГрждрзНржпрзБрж░ ржЖржЧрзЗред"
                    </blockquote>
                    <p class="text-gray-700">ржПржЦржиржЗ рж╕ржоржпрж╝ ржнрж┐рждрзНрждрж┐ рж╕рзНржерж╛ржкржи ржХрж░рж╛рж░, ржкрж░рзЗ ржЖржлрж╕рзЛрж╕ ржХрж░рж╛рж░ ржЖржЧрзЗред</p>
                </div>
                <div class="bg-emerald-100 p-8 rounded-lg border border-emerald-200">
                    <h3 class="text-2xl font-bold text-emerald-800 mb-4">ржПржХ рж╢рж┐рж╢рзБрж░ ржмрж┐рж╢рзНржмрж╛рж╕: ржПржХржЯрж┐ ржЖржзрзБржирж┐ржХ ржЧрж▓рзНржк</h3>
                    <p class="text-gray-700">ржЖржорж╛ржжрзЗрж░ рж╕ржоржпрж╝рзЗ, ржорзБрж╕ржлрж┐рж░ ржирж╛ржорзЗ ржкрж╛ржБржЪ ржмржЫрж░рзЗрж░ ржПржХржЯрж┐ рж╢рж┐рж╢рзБ ржкрзНрж░ржЪржгрзНржб ржЬрзНржмрж░рзЗ ржЕрж╕рзБрж╕рзНрже ржЫрж┐рж▓ред рж╕рзЗ ржорж╕ржЬрж┐ржжрзЗ ржпрж╛ржУржпрж╝рж╛рж░ ржЬржирзНржп ржЬрж┐ржж ржзрж░рзЗ ржмрж╛ржмрж╛ржХрзЗ ржмрж▓рж▓:</p>
                     <blockquote class="text-center font-semibold text-emerald-700 my-4">
                        "ржЖржорж┐ ржорж╕ржЬрж┐ржжрзЗ ржпрж╛ржм, ржЖрж░ ржЖрж▓рзНрж▓рж╛рж╣ ржЖржорж╛ржХрзЗ рж╕рзБрж╕рзНрже ржХрж░рзЗ ржжрзЗржмрзЗржи, ржХрж╛рж░ржг ржЖрж▓рзНрж▓рж╛рж╣ ржирж╛ржорж╛ржЬрж┐ржжрзЗрж░ ржнрж╛рж▓рзЛржмрж╛рж╕рзЗржиред"
                    </blockquote>
                    <p class="text-gray-700">ржПржЗ ржЧрж▓рзНржкржЯрж┐ ржЖржорж╛ржжрзЗрж░ рж╢рзЗржЦрж╛ржпрж╝ ржпрзЗ ржЗржмрж╛ржжрждрзЗрж░ ржорзВрж▓ ржнрж┐рждрзНрждрж┐ рж╣рж▓рзЛ рж╢рж┐рж╢рзБрж░ ржорждрзЛ рж╕рж░рж▓, ржмрж┐рж╢рзБржжрзНржз ржПржмржВ ржЕржЯрж▓ ржмрж┐рж╢рзНржмрж╛рж╕ред ржирж┐рж╖рзНржарж╛рж░ ржпрж╛рждрзНрж░рж╛ рж╢рзБрж░рзБ рж╣ржпрж╝ ржПржЦрж╛ржи ржерзЗржХрзЗржЗред</p>
                </div>
            </div>
        </section>
        
        <!-- Gemini API Section: Personal Dua Generator -->
        <section id="gemini-dua" class="mb-20 bg-emerald-50/50 rounded-lg p-8">
            <div class="text-center mb-8">
                 <h2 class="text-3xl font-bold text-emerald-700">ржЖржкржирж╛рж░ ржмрзНржпржХрзНрждрж┐ржЧржд ржжрзЛржпрж╝рж╛</h2>
                 <p class="mt-2 text-gray-600 max-w-2xl mx-auto">ржЖржкржирж╛рж░ ржоржирзЗрж░ ржХржерж╛ ржмрж╛ ржкрж░рж┐рж╕рзНржерж┐рждрж┐ ржПржЦрж╛ржирзЗ рж▓рж┐ржЦрзБржи, ржПржмржВ ржЖржкржирж╛рж░ ржЬржирзНржп ржПржХржЯрж┐ ржЖржирзНрждрж░рж┐ржХ ржжрзЛржпрж╝рж╛ рждрзИрж░рж┐ ржХрж░рждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░ржмред</p>
            </div>
            <div class="max-w-2xl mx-auto">
                <textarea id="dua-prompt" class="w-full p-4 border border-emerald-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:outline-none" rows="3" placeholder="ржпрзЗржоржи: ржЖржорж┐ ржЖржорж╛рж░ ржкрж░рзАржХрзНрж╖рж╛рж░ ржЬржирзНржп ржЪрж┐ржирзНрждрж┐ржд..."></textarea>
                <button id="generate-dua-btn" class="mt-4 w-full bg-emerald-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-emerald-700 transition-colors duration-300 flex items-center justify-center space-x-2 disabled:bg-emerald-300">
                    <span>тЬи ржжрзЛржпрж╝рж╛ рждрзИрж░рж┐ ржХрж░рзБржи</span>
                    <span id="dua-loader" class="loader hidden"></span>
                </button>
                <div id="dua-result" class="mt-6 p-6 bg-white rounded-lg border border-emerald-200 min-h-[100px] text-gray-700 leading-relaxed whitespace-pre-wrap hidden"></div>
            </div>
        </section>

        <!-- Section 5: Final Destination -->
        <footer class="text-center pt-10 border-t border-gray-200">
            <h2 class="text-3xl font-bold text-emerald-700">ржкрзНрж░ржХрзГржд ржмрж┐рж╢рзНрж░рж╛ржо</h2>
            <p class="text-gray-600 mt-4 max-w-2xl mx-auto">ржЗржорж╛ржо ржЖрж╣ржоржж ржЗржмржирзЗ рж╣рж╛ржорзНржмрж▓ (рж░рж╣ржГ)-ржХрзЗ ржЬрж┐ржЬрзНржЮрзЗрж╕ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрж┐рж▓, "ржмрж╛ржирзНржжрж╛ ржХржЦржи ржмрж┐рж╢рзНрж░рж╛ржорзЗрж░ рж╕рзНржмрж╛ржж ржкрж╛ржмрзЗ?" рждрж┐ржирж┐ ржЙрждрзНрждрж░ ржжрж┐рж▓рзЗржи:</p>
            <blockquote class="text-2xl md:text-3xl font-bold text-emerald-800 my-8">
                "ржЬрж╛ржирзНржирж╛рждрзЗ ржкрзНрж░ржержо ржкрж╛ рж░рж╛ржЦрж╛рж░ рж╕рж╛ржерзЗ рж╕рж╛ржерзЗред"
            </blockquote>
            <p class="text-gray-700 mb-8">ржжрзБржирж┐ржпрж╝рж╛ рж╣рж▓рзЛ рж╕ржВржЧрзНрж░рж╛ржорзЗрж░ ржХрзНрж╖рзЗрждрзНрж░, ржЖрж░ ржЬрж╛ржирзНржирж╛ржд рж╣рж▓рзЛ ржЕржиржирзНржд ржмрж┐рж╢рзНрж░рж╛ржорзЗрж░ рж╕рзНржерж╛ржиред</p>
            <div class="bg-emerald-700 text-white p-8 rounded-lg">
                <p class="text-lg mb-4">ржЖрж╕рзБржи, ржЖржорж░рж╛ ржПржЗ ржжрзЛржпрж╝рж╛ ржХрж░рж┐:</p>
                <p class="text-3xl font-semibold" style="direction: rtl; font-family: 'Amiri', serif;">╪з┘Д┘Д┘З┘Е ╪н╪и╪и ╪е┘Д┘К┘Ж╪з ╪з┘Д╪е┘К┘Е╪з┘Ж╪М ┘И╪▓┘К┘Ж┘З ┘Б┘К ┘В┘Д┘И╪и┘Ж╪з</p>
                <p class="mt-2 text-emerald-200">(рж╣рзЗ ржЖрж▓рзНрж▓рж╛рж╣, ржЖржорж╛ржжрзЗрж░ ржХрж╛ржЫрзЗ ржИржорж╛ржиржХрзЗ ржкрзНрж░рж┐ржпрж╝ ржХрж░рзЗ ржжрж┐ржи ржПржмржВ рждрж╛ ржЖржорж╛ржжрзЗрж░ ржЕржирзНрждрж░рзЗ рж╕рзБрж╢рзЛржнрж┐ржд ржХрж░рзЗ ржжрж┐ржиред)</p>
            </div>
             <p class="mt-8 text-xs text-gray-500">рж╢рж╛ржЗржЦ ржЦрж╛рж▓рж┐ржж ржЖрж▓-рж░рж╛рж╢рзЗржжрзЗрж░ 'ржЖрж╣ржУржпрж╝рж╛рж▓ ржЖрж▓-ржЖржмрзЗржжрзАржи' рж▓рзЗржХржЪрж╛рж░рзЗрж░ ржЙржкрж░ ржнрж┐рждрзНрждрж┐ ржХрж░рзЗ рждрзИрж░рж┐ред</p>
        </footer>

    </main>

    <script>
        // Tab functionality
        const tabs = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-pane');

        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const target = tab.getAttribute('data-tab');

                tabs.forEach(t => {
                    t.classList.remove('tab-active');
                    t.classList.add('tab-inactive');
                });

                tab.classList.add('tab-active');
                tab.classList.remove('tab-inactive');

                tabContents.forEach(content => {
                    if (content.id === target) {
                        content.classList.remove('hidden');
                    } else {
                        content.classList.add('hidden');
                    }
                });
            });
        });

        // Gemini API functionality
        const apiKey = "AIzaSyBdOPNV9QsLtaDuiIAkfB3yBHvwyeAoHb4"; // API Key will be handled by the environment.

        // Dua Generator Elements
        const generateDuaBtn = document.getElementById('generate-dua-btn');
        const duaPromptInput = document.getElementById('dua-prompt');
        const duaResultDiv = document.getElementById('dua-result');
        const duaLoader = document.getElementById('dua-loader');

        // Story Lesson Elements
        const generateLessonBtns = document.querySelectorAll('.generate-lesson-btn');

        // --- Gemini API Call Function ---
        async function callGemini(prompt) {
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
            const payload = {
                contents: [{
                    parts: [{
                        text: prompt
                    }]
                }]
            };

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`API Error: ${response.statusText}`);
                }

                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    return result.candidates[0].content.parts[0].text;
                } else {
                    return "ржжрзБржГржЦрж┐ржд, ржПржХржЯрж┐ ржкрзНрж░рждрж┐ржХрзНрж░рж┐ржпрж╝рж╛ рждрзИрж░рж┐ ржХрж░рж╛ ржпрж╛ржпрж╝ржирж┐ред ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ ржЖржмрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржиред";
                }
            } catch (error) {
                console.error("Gemini API call failed:", error);
                return "рждрзНрж░рзБржЯрж┐ ржШржЯрзЗржЫрзЗред ржЖржкржирж╛рж░ ржЗржирзНржЯрж╛рж░ржирзЗржЯ рж╕ржВржпрзЛржЧ ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рзБржи ржПржмржВ ржЖржмрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржиред";
            }
        }


        // --- Personal Dua Generator Logic ---
        generateDuaBtn.addEventListener('click', async () => {
            const userInput = duaPromptInput.value.trim();
            if (!userInput) {
                duaResultDiv.textContent = "ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ ржЖржкржирж╛рж░ ржЕржирзБржнрзВрждрж┐ ржмрж╛ ржкрж░рж┐рж╕рзНржерж┐рждрж┐ ржмрж░рзНржгржирж╛ ржХрж░рзБржиред";
                duaResultDiv.classList.remove('hidden');
                return;
            }

            // Disable button and show loader
            generateDuaBtn.disabled = true;
            duaLoader.classList.remove('hidden');
            duaResultDiv.classList.add('hidden');
            
            const prompt = `You are a wise and empathetic Islamic scholar. A person is feeling '${userInput}'. Based on this feeling, compose a short, personal, and heartfelt prayer (dua) in Bengali that they can use to talk to Allah. The dua should be original, full of hope and humility, and avoid complex theological terms. Start with 'рж╣рзЗ ржЖрж▓рзНрж▓рж╛рж╣,' (O Allah,) and maintain a gentle, comforting tone. Make sure the output is only the prayer text.`;

            const generatedDua = await callGemini(prompt);

            // Display result
            duaResultDiv.textContent = generatedDua;
            duaResultDiv.classList.remove('hidden');

            // Re-enable button and hide loader
            generateDuaBtn.disabled = false;
            duaLoader.classList.add('hidden');
        });

        // --- Story Lesson Generator Logic ---
        generateLessonBtns.forEach(btn => {
            btn.addEventListener('click', async () => {
                const card = btn.closest('.flex-shrink-0 > div');
                const storyText = card.querySelector('.story-text').textContent;
                const lessonsDiv = card.querySelector('.story-lessons');
                const loader = btn.querySelector('.loader');

                if (lessonsDiv.innerHTML.trim() !== "") { // If lessons are already loaded
                    lessonsDiv.innerHTML = ""; // Hide them
                    return;
                }

                // Disable button and show loader
                btn.disabled = true;
                loader.classList.remove('hidden');

                const prompt = `Analyze the following short story about a devout Muslim: '${storyText}'. In simple Bengali, extract 2-3 key practical and spiritual lessons from this story that a person can apply in their modern life to improve their own worship and character. Present the lessons as a short, bulleted list (using 'тАв' as the bullet). The tone should be encouraging and insightful.`;

                const generatedLessons = await callGemini(prompt);

                // Display result
                lessonsDiv.innerHTML = `<h5 class="font-semibold text-emerald-700 mb-2">рж╢рж┐ржХрзНрж╖рж╛:</h5><div class="text-sm text-gray-600 space-y-2">${generatedLessons.replace(/\тАв/g, '<span class="text-emerald-600 mr-2">тАв</span>')}</div>`;

                // Re-enable button and hide loader
                btn.disabled = false;
                loader.classList.add('hidden');
            });
        });

    </script>
</body>
</html>
