<!DOCTYPE html>
<html lang="bn" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>рж╕ржорзЯрзЗрж░ ржорзВрж▓рзНржп: ржПржХржЯрж┐ ржЗржирзНржЯрж╛рж░рзЗржХрзНржЯрж┐ржн ржЗржиржлрзЛржЧрзНрж░рж╛ржлрж┐ржХ</title>
    <!-- Chosen Palette: Calm Neutrals -->
    <!-- Application Structure Plan: The SPA is designed as a single-page, vertical scrolling infographic with a sticky navigation bar. It includes thematic sections covering the importance of time, a data visualization of a lifespan, categories of people, 'thieves of time', and examples from the Salaf. This update adds two Gemini API-powered features: 1) A personalized action plan generator based on user-selected time-wasting habits. 2) A custom Dua (supplication) generator. These features add a layer of personalization and practical utility, making the application more interactive and helpful. -->
    <!-- Visualization & Content Choices: 
        - Report Info: Breakdown of a 60-year life. -> Goal: Show proportions. -> Viz/Method: Chart.js Donut Chart. -> Interaction: Hover tooltips. -> Justification: Best for showing parts-of-a-whole data. -> Library: Chart.js.
        - Report Info: Three categories of people. -> Goal: Compare/contrast. -> Viz/Method: Interactive HTML tabs. -> Interaction: Click to reveal. -> Justification: Focused comparison. -> Library: Vanilla JS.
        - Report Info: Wisdom of the Salaf (quotes). -> Goal: Present wisdom. -> Viz/Method: HTML/CSS/JS carousel. -> Interaction: Click to navigate. -> Justification: Dynamic presentation. -> Library: Vanilla JS.
        - User Input: Time-wasting habits. -> Goal: Provide actionable advice. -> Viz/Method: Gemini API text generation. -> Interaction: Select habits, click button. -> Justification: Creates personalized, practical value. -> Library: Gemini API via Fetch.
        - User Input: Prayer need. -> Goal: Generate a relevant supplication. -> Viz/Method: Gemini API text generation. -> Interaction: Input text, click button. -> Justification: Offers spiritual and personal assistance. -> Library: Gemini API via Fetch.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Hind Siliguri', sans-serif;
            background-color: #FDFBF6;
            color: #403D39;
        }
        .nav-active {
            color: #B08871;
            font-weight: 600;
        }
        .tab-active {
            background-color: #8D806F;
            color: #FDFBF6;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 450px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 350px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
                max-height: 400px;
            }
        }
        /* Modal styles */
        .modal {
            transition: opacity 0.25s ease;
        }
        .modal-content {
            transition: transform 0.25s ease;
        }
        /* Checkbox styles */
        .thief-checkbox:checked + div {
            border-color: #8D806F;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transform: translateY(-2px);
        }
    </style>
</head>
<body class="antialiased">

    <!-- Modal for Gemini API responses -->
    <div id="gemini-modal" class="modal hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="modal-content transform -translate-y-10 bg-white rounded-lg shadow-xl max-w-2xl w-full p-6 text-center">
            <div id="modal-loading" class="hidden">
                <div class="animate-spin rounded-full h-16 w-16 border-b-2 border-[#8D806F] mx-auto"></div>
                <p class="mt-4 text-lg">ржЖржкржирж╛рж░ ржЬржирзНржп рждрзИрж░рж┐ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ...</p>
            </div>
            <div id="modal-result">
                <!-- Content will be injected here -->
            </div>
            <button id="modal-close-btn" class="mt-6 bg-[#8D806F] text-white py-2 px-6 rounded-lg hover:bg-[#7a6f60] transition-colors">ржмржирзНржз ржХрж░рзБржи</button>
        </div>
    </div>

    <!-- Header & Navigation -->
    <header class="sticky top-0 z-40 bg-[#FDFBF6]/80 backdrop-blur-sm shadow-sm">
        <div class="container mx-auto px-4">
            <nav class="flex flex-col md:flex-row items-center justify-between py-2">
                <h1 class="text-2xl font-bold text-[#8D806F] mb-2 md:mb-0">рж╕ржорзЯрзЗрж░ ржорзВрж▓рзНржп</h1>
                <ul class="flex flex-wrap justify-center space-x-3 md:space-x-5 text-sm font-medium">
                    <li><a href="#intro" class="nav-link hover:text-[#B08871] transition-colors duration-300">ржнрзВржорж┐ржХрж╛</a></li>
                    <li><a href="#accounting" class="nav-link hover:text-[#B08871] transition-colors duration-300">ржЬрзАржмржирзЗрж░ рж╣рж┐рж╕рж╛ржм</a></li>
                    <li><a href="#categories" class="nav-link hover:text-[#B08871] transition-colors duration-300">ржорж╛ржирзБрж╖рзЗрж░ ржкрзНрж░ржХрж╛рж░ржнрзЗржж</a></li>
                    <li><a href="#thieves" class="nav-link hover:text-[#B08871] transition-colors duration-300">рж╕ржорзЯрзЗрж░ ржЪрзЛрж░</a></li>
                    <li><a href="#beacons" class="nav-link hover:text-[#B08871] transition-colors duration-300">ржЖрж▓рзЛржХржмрж░рзНрждрж┐ржХрж╛</a></li>
                    <li><a href="#opportunity" class="nav-link hover:text-[#B08871] transition-colors duration-300">рж╢рзЗрж╖ рж╕рзБржпрзЛржЧ</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8 md:py-12">

        <!-- Section 1: Introduction -->
        <section id="intro" class="text-center mb-16 md:mb-24">
            <h2 class="text-3xl md:text-4xl font-bold text-[#8D806F] mb-4">ржХрзЗржи рж╕ржорзЯ ржПржд ржорзВрж▓рзНржпржмрж╛ржи?</h2>
            <p class="max-w-3xl mx-auto text-base md:text-lg mb-8">
                ржЗрж╕рж▓рж╛ржорзЗ рж╕ржоржпрж╝ рж╢рзБржзрзБржорж╛рждрзНрж░ ржЬрзАржмржирзЗрж░ ржПржХржЯрж┐ ржкрж░рж┐ржорж╛ржк ржиржпрж╝, ржмрж░ржВ ржПржЯрж┐ рж╕рзНржмржпрж╝ржВ ржЖрж▓рзНрж▓рж╛рж╣ ржкрзНрж░ржжрждрзНржд ржПржХ ржкржмрж┐рждрзНрж░ ржЖржорж╛ржирждред ржПрж░ ржЧрзБрж░рзБрждрзНржм ржПрждржЯрж╛ржЗ ржпрзЗ, ржорж╣рж╛ржи ржЖрж▓рзНрж▓рж╛рж╣ ржирж┐ржЬрзЗ ржкржмрж┐рждрзНрж░ ржХрзБрж░ржЖржирзЗ рж╕ржоржпрж╝рзЗрж░ рж╢ржкрже ржХрж░рзЗржЫрзЗржиред рж╕ржоржпрж╝ржЗ рж╣рж▓рзЛ ржорзБржорж┐ржирзЗрж░ ржорзВрж▓ржзржи, ржпрж╛ ржжрж┐ржпрж╝рзЗ рж╕рзЗ ржЖржЦрж┐рж░рж╛рждрзЗрж░ ржЕржиржирзНржд ржЬрзАржмржирзЗрж░ ржЬржирзНржп ржмрзНржпржмрж╕рж╛ ржХрж░рзЗред ржПржЗ ржЕржВрж╢рзЗ ржЖржорж░рж╛ рж╕ржоржпрж╝рзЗрж░ ржРрж╢рзНржмрж░рж┐ржХ ржЧрзБрж░рзБрждрзНржм ржПржмржВ ржПржЯрж┐ржХрзЗ ржХрзЗржи ржЬрзАржмржирзЗрж░ рж╕ржмржЪрзЗржпрж╝рзЗ ржорзВрж▓рзНржпржмрж╛ржи рж╕ржорзНржкржж рж╣рж┐рж╕рзЗржмрзЗ ржжрзЗржЦрж╛ рж╣ржпрж╝, рждрж╛ ржЕржирзНржмрзЗрж╖ржг ржХрж░ржмред
            </p>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6">
                <div class="bg-white/50 rounded-lg p-4 shadow-sm border border-gray-200">
                    <p class="text-2xl font-serif text-[#7D8F69]">┘И┘О╪з┘Д┘Т╪╣┘О╪╡┘Т╪▒┘Р</p>
                    <p class="mt-2 text-sm">рж╕ржорзЯрзЗрж░ рж╢ржкрже</p>
                    <p class="text-xs text-gray-500">(рж╕рзВрж░рж╛ ржЖрж▓-ржЖрж╕рж░)</p>
                </div>
                <div class="bg-white/50 rounded-lg p-4 shadow-sm border border-gray-200">
                    <p class="text-2xl font-serif text-[#7D8F69]">┘И┘О╪з┘Д╪╢┘С┘П╪н┘О┘Й┘░</p>
                    <p class="mt-2 text-sm">рж╢ржкрже ржкрзВрж░рзНржмрж╛рж╣рзНржгрзЗрж░</p>
                    <p class="text-xs text-gray-500">(рж╕рзВрж░рж╛ ржЖржж-ржжрзБрж╣рж╛)</p>
                </div>
                <div class="bg-white/50 rounded-lg p-4 shadow-sm border border-gray-200">
                    <p class="text-2xl font-serif text-[#7D8F69]">┘И┘О╪з┘Д┘Д┘С┘О┘К┘Т┘Д┘Р</p>
                    <p class="mt-2 text-sm">рж╢ржкрже рж░рж╛рждрзЗрж░</p>
                    <p class="text-xs text-gray-500">(рж╕рзВрж░рж╛ ржЖрж▓-рж▓рж╛ржЗрж▓)</p>
                </div>
                <div class="bg-white/50 rounded-lg p-4 shadow-sm border border-gray-200">
                    <p class="text-2xl font-serif text-[#7D8F69]">┘И┘О╪з┘Д┘Т┘Б┘О╪м┘Т╪▒┘Р</p>
                    <p class="mt-2 text-sm">рж╢ржкрже ржлржЬрж░рзЗрж░</p>
                    <p class="text-xs text-gray-500">(рж╕рзВрж░рж╛ ржЖрж▓-ржлржЬрж░)</p>
                </div>
            </div>
        </section>

        <!-- Section 2: Life's Accounting -->
        <section id="accounting" class="mb-16 md:mb-24">
            <h2 class="text-3xl md:text-4xl font-bold text-center text-[#8D806F] mb-4">ржЬрзАржмржирзЗрж░ рж╣рж┐рж╕рж╛ржм: рзмрзж ржмржЫрж░рзЗрж░ ржмрж╛рж╕рзНрждржмрждрж╛</h2>
            <p class="max-w-3xl mx-auto text-base md:text-lg text-center mb-8">
                ржЖржорж░рж╛ ржкрзНрж░рж╛ржпрж╝ржЗ ржнрж╛ржмрж┐ ржЖржорж╛ржжрзЗрж░ рж╣рж╛рждрзЗ ржЕржирзЗржХ рж╕ржоржпрж╝ ржЖржЫрзЗред ржХрж┐ржирзНрждрзБ ржПржХржЯрж┐ рзмрзж ржмржЫрж░рзЗрж░ ржЬрзАржмржиржХрзЗ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржХрж░рж▓рзЗ ржПржХ ржЪржоржХржкрзНрж░ржж рж╕рждрзНржп ржЙржирзНржорзЛржЪрж┐ржд рж╣рзЯред ржЖржорж╛ржжрзЗрж░ ржЬрзАржмржирзЗрж░ ржПржХ ржмрж┐рж╢рж╛рж▓ ржЕржВрж╢ ржШрзБржо, рж╢рзИрж╢ржм ржПржмржВ ржжрзИржиржирзНржжрж┐ржи ржкрзНрж░ржпрж╝рзЛржЬржирзЗ ржмрзНржпржпрж╝ рж╣ржпрж╝рзЗ ржпрж╛ржпрж╝ред ржПржЗ ржбрзЗржЯрж╛ ржнрж┐ржЬрзНржпрзБржпрж╝рж╛рж▓рж╛ржЗржЬрзЗрж╢ржиржЯрж┐ ржЖржорж╛ржжрзЗрж░ ржжрзЗржЦрж╛ржпрж╝ ржпрзЗ ржЗржмрж╛ржжржд ржПржмржВ рж╕рзОржХрж╛ржЬрзЗрж░ ржЬржирзНржп ржкрзНрж░ржХрзГржд ржмрзНржпржмрж╣рж╛рж░ржпрзЛржЧрзНржп рж╕ржоржпрж╝ ржХрждржЯрж╛ рж╕рзАржорж┐ржд, ржпрж╛ ржЖржорж╛ржжрзЗрж░ ржкрзНрж░рждрж┐ржЯрж┐ ржорзБрж╣рзВрж░рзНрждржХрзЗ ржХрж╛ржЬрзЗ рж▓рж╛ржЧрж╛рждрзЗ ржЙржжрзНржмрзБржжрзНржз ржХрж░рзЗред
            </p>
            <div class="flex flex-col md:flex-row items-center gap-8">
                <div class="w-full md:w-1/2">
                    <div class="chart-container">
                        <canvas id="lifeChart"></canvas>
                    </div>
                </div>
                <div class="w-full md:w-1/2 text-left space-y-4">
                     <div class="bg-white/50 rounded-lg p-4 shadow-sm border-l-4 border-[#3D5A80]">
                        <h3 class="font-bold text-lg">ржШрзБржо (Sleep)</h3>
                        <p>ржжрзИржирж┐ржХ рзо ржШржгрзНржЯрж╛ рж╣рж┐рж╕рж╛ржмрзЗ, ржЬрзАржмржирзЗрж░ ржкрзНрж░рж╛рзЯ рзирзж ржмржЫрж░ ржШрзБржорж┐рзЯрзЗржЗ ржХрзЗржЯрзЗ ржпрж╛рзЯред</p>
                    </div>
                     <div class="bg-white/50 rounded-lg p-4 shadow-sm border-l-4 border-[#98C1D9]">
                        <h3 class="font-bold text-lg">рж╢рзИрж╢ржм (Childhood)</h3>
                        <p>ржЗрж╕рж▓рж╛ржорзА рж╢рж░рзАрзЯржд ржЕржирзБржпрж╛рзЯрзА ╪и╪з┘Д╪║ рж╣ржУрзЯрж╛рж░ ржкрзВрж░рзНржмрзЗрж░ ржкрзНрж░рж╛рзЯ рззрзл ржмржЫрж░ рж╣рж┐рж╕рж╛ржмрзЗрж░ ржмрж╛ржЗрж░рзЗред</p>
                    </div>
                     <div class="bg-white/50 rounded-lg p-4 shadow-sm border-l-4 border-[#E0FBFC]">
                        <h3 class="font-bold text-lg">ржжрзИржиржирзНржжрж┐ржи ржкрзНрж░рзЯрзЛржЬржи (Daily Needs)</h3>
                        <p>ржЦрж╛ржУрзЯрж╛, ржкрж╛ржи ржХрж░рж╛, ржПржмржВ ржЕржирзНржпрж╛ржирзНржп ржмрзНржпржХрзНрждрж┐ржЧржд ржХрж╛ржЬрзЗ ржкрзНрж░рж╛рзЯ рзи-рзй ржмржЫрж░ ржЪрж▓рзЗ ржпрж╛рзЯред</p>
                    </div>
                     <div class="bg-white/50 rounded-lg p-4 shadow-sm border-l-4 border-[#EE6C4D]">
                        <h3 class="font-bold text-lg text-red-700">ржЖржорж▓рзЗрж░ ржЬржирзНржп ржЕржмрж╢рж┐рж╖рзНржЯ рж╕ржорзЯ</h3>
                        <p>ржлрж▓рж╛ржлрж▓рж╕рзНржмрж░рзВржк, ржЖржорж╛ржжрзЗрж░ рж╣рж╛рждрзЗ ржерж╛ржХрзЗ ржорж╛рждрзНрж░ рзирзи-рзирзй ржмржЫрж░, ржпрж╛ ржЖржорж╛ржжрзЗрж░ ржЖржЦрж┐рж░рж╛рждрзЗрж░ ржкрж╛ржерзЗрзЯ ржЕрж░рзНржЬржирзЗрж░ ржПржХржорж╛рждрзНрж░ рж╕рзБржпрзЛржЧред</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 3: Categories of People -->
        <section id="categories" class="mb-16 md:mb-24">
            <h2 class="text-3xl md:text-4xl font-bold text-center text-[#8D806F] mb-4">рж╕ржорзЯрзЗрж░ ржмрзНржпржмрж╣рж╛рж░рзЗ ржорж╛ржирзБрж╖рзЗрж░ ржкрзНрж░ржХрж╛рж░ржнрзЗржж</h2>
             <p class="max-w-3xl mx-auto text-base md:text-lg text-center mb-8">
                ржкржмрж┐рждрзНрж░ ржХрзБрж░ржЖржирзЗрж░ рж╕рзВрж░рж╛ ржлрж╛рждрж┐рж░-ржПрж░ рзйрзи ржиржорзНржмрж░ ржЖрзЯрж╛рждрзЗрж░ ржЖрж▓рзЛржХрзЗ, рж╕ржоржпрж╝рзЗрж░ рж╕ржжрзНржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржнрж┐рждрзНрждрж┐рждрзЗ ржорж╛ржирзБрж╖ржХрзЗ рждрж┐ржиржЯрж┐ ржкрзНрж░ржзрж╛ржи ржнрж╛ржЧрзЗ ржнрж╛ржЧ ржХрж░рж╛ ржпрж╛ржпрж╝ред ржПржЗ ржЗржирзНржЯрж╛рж░рзЗржХрзНржЯрж┐ржн ржмрж┐ржнрж╛ржЧржЯрж┐ ржЖржкржирж╛ржХрзЗ ржкрзНрж░рждрж┐ржЯрж┐ ржкрзНрж░ржХрж╛рж░рзЗрж░ ржмрзИрж╢рж┐рж╖рзНржЯрзНржп ржЕржирзНржмрзЗрж╖ржг ржХрж░рждрзЗ ржПржмржВ ржирж┐ржЬрзЗрж░ ржЕржмрж╕рзНржерж╛ржи рж╕ржорзНржкрж░рзНржХрзЗ ржнрж╛ржмрждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░ржмрзЗред ржЖржкржирж┐ ржХрзЛржи ржжрж▓рзЗ ржЕржирзНрждрж░рзНржнрзБржХрзНржд рж╣рждрзЗ ржЪрж╛ржи, рж╕рзЗржЗ рж╕рж┐ржжрзНржзрж╛ржирзНржд ржЖржкржирж╛рж░ред
            </p>
            <div class="w-full max-w-4xl mx-auto">
                <div class="flex justify-center border-b border-gray-300 mb-6">
                    <button class="category-tab tab-active py-2 px-6 font-semibold" data-target=" ╪╕┘Д┘Е ┘Д┘Ж┘Б╪│┘З">ржирж┐ржЬрзЗрж░ ржкрзНрж░рждрж┐ ржЕрждрзНржпрж╛ржЪрж╛рж░рзА</button>
                    <button class="category-tab py-2 px-6 font-semibold" data-target="┘Е┘В╪к╪╡╪п">ржоржзрзНржпржоржкржирзНржерзА</button>
                    <button class="category-tab py-2 px-6 font-semibold" data-target="╪│╪з╪и┘В ╪и╪з┘Д╪о┘К╪▒╪з╪к">ржХрж▓рзНржпрж╛ржгрзЗ ржЕржЧрзНрж░ржЧрж╛ржорзА</button>
                </div>
                <div id="category-content" class="p-2 md:p-6 bg-white/50 rounded-lg shadow-sm border border-gray-200 transition-all duration-300 min-h-[150px]">
                    <!-- Content will be injected by JS -->
                </div>
            </div>
        </section>

        <!-- Section 4: Thieves of Time (Gemini Enhanced) -->
        <section id="thieves" class="mb-16 md:mb-24">
             <h2 class="text-3xl md:text-4xl font-bold text-center text-[#8D806F] mb-4">рж╕ржорзЯрзЗрж░ ржЕржжрзГрж╢рзНржп ржЪрзЛрж░рзЗрж░рж╛</h2>
             <p class="max-w-3xl mx-auto text-base md:text-lg text-center mb-8">
                ржЖржзрзБржирж┐ржХ ржЬрзАржмржирзЗ ржПржоржи ржЕржирзЗржХ ржЕржжрзГрж╢рзНржп "ржЪрзЛрж░" рж░ржпрж╝рзЗржЫрзЗ ржпрж╛рж░рж╛ ржЖржорж╛ржжрзЗрж░ рж╕ржоржпрж╝ ржЪрзБрж░рж┐ ржХрж░рзЗред ржпрзЗ ржмрж┐рж╖ржпрж╝ржЧрзБрж▓рзЛ ржЖржкржирж╛рж░ ржЬржирзНржп ржкрзНрж░ржпрзЛржЬрзНржп, рж╕рзЗржЧрзБрж▓рзЛ ржЪрж┐рж╣рзНржирж┐ржд ржХрж░рзБржи ржПржмржВ ржЖржкржирж╛рж░ ржЬржирзНржп ржПржХржЯрж┐ ржмрзНржпржХрзНрждрж┐ржЧржд ржХрж░рзНржо-ржкрж░рж┐ржХрж▓рзНржкржирж╛ рждрзИрж░рж┐ ржХрж░рждрзЗ ржирж┐ржЪрзЗрж░ ржмрж╛ржЯржирзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзБржиред
            </p>
            <div id="thieves-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Checkboxes will be injected by JS -->
            </div>
            <div class="text-center mt-10">
                <button id="generate-plan-btn" class="bg-gradient-to-r from-[#8D806F] to-[#B08871] text-white font-bold py-3 px-8 rounded-lg shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300">
                    тЬи ржЖржорж╛рж░ ржЬржирзНржп ржХрж░рзНржо-ржкрж░рж┐ржХрж▓рзНржкржирж╛ рждрзИрж░рж┐ ржХрж░рзБржи
                </button>
            </div>
        </section>

        <!-- Section 5: Beacons of Light -->
        <section id="beacons" class="mb-16 md:mb-24">
            <h2 class="text-3xl md:text-4xl font-bold text-center text-[#8D806F] mb-4">ржЖрж▓рзЛржХржмрж░рзНрждрж┐ржХрж╛: ржЖржорж╛ржжрзЗрж░ ржкрзВрж░рзНржмрж╕рзВрж░рж┐ржЧржг</h2>
            <p class="max-w-3xl mx-auto text-base md:text-lg text-center mb-8">
                рж╕ржоржпрж╝рзЗрж░ ржорзВрж▓рзНржп ржЕржирзБржзрж╛ржмржирзЗ ржЖржорж╛ржжрзЗрж░ ржЬржирзНржп рж╢рзНрж░рзЗрж╖рзНржа ржЙржжрж╛рж╣рж░ржг рж╣рж▓рзЗржи ржЖржорж╛ржжрзЗрж░ ржкрзВрж░рзНржмрж╕рзВрж░рж┐ржЧржг (рж╕рж╛рж▓рж╛ржл ржЖрж╕-рж╕рж╛рж▓рж┐рж╣рзАржи)ред рждрж╛ржБрж░рж╛ ржкрзНрж░рждрж┐ржЯрж┐ ржорзБрж╣рзВрж░рзНрждржХрзЗ ржЖржЦрж┐рж░рж╛рждрзЗрж░ ржЬржирзНржп ржмрж┐ржирж┐ржпрж╝рзЛржЧ ржоржирзЗ ржХрж░рждрзЗржиред рждрж╛ржБржжрзЗрж░ ржЬрзАржмржи ржерзЗржХрзЗ ржирзЗржУржпрж╝рж╛ ржХрж┐ржЫрзБ ржШржЯржирж╛ ржУ ржЙржХрзНрждрж┐ ржЖржорж╛ржжрзЗрж░ ржЬржирзНржп ржЕржирзБржкрзНрж░рзЗрж░ржгрж╛рж░ ржмрж╛рждрж┐ржШрж░ред
            </p>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-start">
                <div>
                    <h3 class="text-2xl font-bold text-center text-[#7D8F69] mb-6">рж╕рж╛рж▓рж╛ржлржжрзЗрж░ ржкрзНрж░ржЬрзНржЮрж╛</h3>
                    <div id="salaf-quotes-carousel" class="relative bg-white/50 rounded-lg p-6 shadow-sm border border-gray-200 overflow-hidden min-h-[200px]">
                        <!-- Carousel items will be injected by JS -->
                    </div>
                     <div class="flex justify-center mt-4 space-x-3">
                        <button id="prev-quote" class="bg-[#8D806F] text-white rounded-full h-8 w-8 flex items-center justify-center transition-transform hover:scale-110">тА╣</button>
                        <button id="next-quote" class="bg-[#8D806F] text-white rounded-full h-8 w-8 flex items-center justify-center transition-transform hover:scale-110">тА║</button>
                    </div>
                </div>

                <div>
                    <h3 class="text-2xl font-bold text-center text-[#7D8F69] mb-6">ржХрж▓рзНржпрж╛ржгрзЗрж░ ржкржерзЗ ржкрзНрж░рждрж┐ржпрзЛржЧрж┐рждрж╛рж░ ржЙржжрж╛рж╣рж░ржг</h3>
                    <div class="space-y-4">
                        <div class="bg-white/50 rounded-lg p-4 shadow-sm border-l-4 border-[#B08871]">
                            <h4 class="font-bold">ржЖржмрзБ ржмржХрж░ ржЖрж╕-рж╕рж┐ржжрзНржжрзАржХ (рж░рж╛ржГ)</h4>
                            <p class="text-sm">рждрж╛ржмрзБржХрзЗрж░ ржпрзБржжрзНржзрзЗрж░ ржЬржирзНржп рж╕рж╛рж╣рж╛ржпрзНржп ржЪрж╛ржУржпрж╝рж╛ рж╣рж▓рзЗ рждрж┐ржирж┐ рждрж╛ржБрж░ рж╕ржХрж▓ рж╕ржорзНржкржж ржирж┐ржпрж╝рзЗ рж╣рж╛ржЬрж┐рж░ рж╣ржиред рж░рж╛рж╕рзВрж▓ (я╖║) ржЬрж┐ржЬрзНржЮрзЗрж╕ ржХрж░рж▓рзЗ рждрж┐ржирж┐ ржмрж▓рзЗржи, "ржЖржорж┐ рждрж╛ржжрзЗрж░ ржЬржирзНржп ржЖрж▓рзНрж▓рж╛рж╣ ржУ рждрж╛ржБрж░ рж░рж╛рж╕рзВрж▓ржХрзЗ рж░рзЗржЦрзЗ ржПрж╕рзЗржЫрж┐ред"</p>
                        </div>
                        <div class="bg-white/50 rounded-lg p-4 shadow-sm border-l-4 border-[#B08871]">
                            <h4 class="font-bold">ржЖрзЯрзЗрж╢рж╛ (рж░рж╛ржГ)</h4>
                            <p class="text-sm">рждрж┐ржирж┐ ржПржХ ржжрж┐ржирзЗ рзорзж,рзжрзжрзж ржжрж┐ржирж╛рж░ ржжрж╛ржи ржХрж░рзЗ ржжрзЗржи, ржЕржержЪ рж╕рзЗржжрж┐ржи рждрж┐ржирж┐ рж░рзЛржЬрж╛ ржЫрж┐рж▓рзЗржи ржПржмржВ ржЗржлрждрж╛рж░рзЗрж░ ржЬржирзНржп рждрж╛ржБрж░ ржирж┐ржЬрзЗрж░ ржХрж╛ржЫрзЗ ржХрж┐ржЫрзБржЗ ржЕржмрж╢рж┐рж╖рзНржЯ ржЫрж┐рж▓ ржирж╛ред</p>
                        </div>
                        <div class="bg-white/50 rounded-lg p-4 shadow-sm border-l-4 border-[#B08871]">
                            <h4 class="font-bold">рждрж┐ржи рж╢рж╣рзАржжрзЗрж░ ржорж╛</h4>
                            <p class="text-sm">рждрж┐ржи ржЫрзЗрж▓рзЗрж░ рж╢рж╛рж╣рж╛ржжрж╛рждрзЗрж░ ржЦржмрж░ рж╢рзБржирзЗ рждрж┐ржирж┐ ржЬрж┐ржЬрзНржЮрзЗрж╕ ржХрж░рзЗржи, "рждрж╛рж░рж╛ ржХрж┐ р┤ор╡Бр┤ир╡Нр┤ир╡Лр┤Яр╡Нр┤Яр╡Н ржПржЧрж┐рзЯрзЗ рж╢рж╣рзАржж рж╣рзЯрзЗржЫрзЗ ржирж╛ржХрж┐ ржкрж╛рж▓рж┐рзЯрзЗ ржЖрж╕рж╛рж░ рж╕ржорзЯ?" р┤ор╡Бр┤ир╡Нр┤ир╡Лр┤Яр╡Нр┤Яр╡Н ржпрж╛ржУрзЯрж╛рж░ ржХржерж╛ рж╢рзБржирзЗ рждрж┐ржирж┐ ржЖрж▓рзНрж▓рж╛рж╣рж░ рж╢рзБржХрж░рж┐рзЯрж╛ ржЖржжрж╛рзЯ ржХрж░рзЗржиред</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 6: The Final Opportunity (Gemini Enhanced) -->
        <section id="opportunity" class="text-center">
            <h2 class="text-3xl md:text-4xl font-bold text-[#8D806F] mb-4">рж╢рзЗрж╖ рж╕рзБржпрзЛржЧ: ржмрж░рзНрждржорж╛ржиржХрзЗ ржХрж╛ржЬрзЗ рж▓рж╛ржЧрж╛ржи</h2>
            <p class="max-w-3xl mx-auto text-base md:text-lg mb-8">
                ржЕрждрзАржд ржЪрж▓рзЗ ржЧрзЗржЫрзЗ, ржнржмрж┐рж╖рзНржпрзО ржЕржирж┐рж╢рзНржЪрж┐рждред ржЖржорж╛ржжрзЗрж░ рж╣рж╛рждрзЗ ржЖржЫрзЗ рж╢рзБржзрзБ ржмрж░рзНрждржорж╛ржиред рж╣рждрж╛рж╢ ржирж╛ рж╣ржпрж╝рзЗ, ржЕржмрж╢рж┐рж╖рзНржЯ ржЬрзАржмржиржХрзЗ рж╕ржВрж╢рзЛржзржи ржХрж░рж╛рж░ ржоржзрзНржпрзЗржЗ рж░ржпрж╝рзЗржЫрзЗ ржорзБржХрзНрждрж┐ред
            </p>
            <div class="max-w-2xl mx-auto bg-[#8D806F] text-white rounded-lg p-6 shadow-lg mb-12">
                <p class="text-xl md:text-2xl font-bold mb-2">рж╕рзБржлрж┐рзЯрж╛ржи рж╕рж╛ржУрж░рж┐ (рж░рж╣ржГ) ржПрж░ ржЙржкржжрзЗрж╢</p>
                <p class="text-lg md:text-xl">"ржЕржмрж╢рж┐рж╖рзНржЯ ржЬрзАржмржирзЗ ржирж┐ржЬрзЗржХрзЗ рж╕ржВрж╢рзЛржзржи ржХрж░рзЛ, рждрж╛рж╣рж▓рзЗ рждрзЛржорж╛рж░ ржЕрждрзАржд ржПржмржВ ржнржмрж┐рж╖рзНржпрждрзЗрж░ ржЧрзБржирж╛рж╣ ржХрзНрж╖ржорж╛ ржХрж░рзЗ ржжрзЗржУрзЯрж╛ рж╣ржмрзЗред"</p>
            </div>
            
             <h3 class="text-2xl font-bold text-center text-[#7D8F69] mb-6">ржорзБржорж┐ржирзЗрж░ ржЬрзАржмржиржмрж┐ржзрж╛ржи: 'ржЗржмрж╛ржжрзБрж░ рж░рж╣ржорж╛ржи'-ржПрж░ ржЧрзБржгрж╛ржмрж▓рзА</h3>
            <div id="blueprint-accordion" class="max-w-3xl mx-auto text-left mb-16">
                <!-- Accordion items will be injected by JS -->
            </div>

            <div class="bg-white/50 p-8 rounded-lg shadow-md border max-w-3xl mx-auto">
                <h3 class="text-2xl font-bold text-center text-[#8D806F] mb-4">тЬи ржЖржкржирж╛рж░ ржмрзНржпржХрзНрждрж┐ржЧржд ржжрзЛрзЯрж╛ рждрзИрж░рж┐ ржХрж░рзБржи</h3>
                <p class="max-w-2xl mx-auto text-center mb-6">ржЖржкржирж╛рж░ ржоржирзЗрж░ ржХрзЛржирзЛ ржЗржЪрзНржЫрж╛ ржмрж╛ ржкрзНрж░рзЯрзЛржЬржирзЗрж░ ржХржерж╛ рж▓рж┐ржЦрзБржи, ржЖржорж░рж╛ ржХрзБрж░ржЖржирзА ржУ ржиржмржмрзА ржжрзЛрзЯрж╛рж░ ржЖрж▓рзЛржХрзЗ ржЖржкржирж╛рж░ ржЬржирзНржп ржПржХржЯрж┐ рж╕рзБржирзНржжрж░ ржжрзЛрзЯрж╛ рждрзИрж░рж┐ ржХрж░рзЗ ржжрзЗржмред</p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <input type="text" id="dua-prompt-input" placeholder="ржпрзЗржоржи: ржирж╛ржорж╛ржЬрзЗ ржоржирзЛржпрзЛржЧ ржмрзГржжрзНржзрж┐рж░ ржЬржирзНржп..." class="w-full sm:w-80 px-4 py-2 border border-gray-300 rounded-lg focus:ring-[#B08871] focus:border-[#B08871]">
                    <button id="generate-dua-btn" class="bg-gradient-to-r from-[#8D806F] to-[#B08871] text-white font-bold py-2 px-6 rounded-lg shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300">
                        ржжрзЛрзЯрж╛ рждрзИрж░рж┐ ржХрж░рзБржи
                    </button>
                </div>
            </div>
        </section>

    </main>

    <footer class="text-center py-6 mt-12 bg-white/50">
        <p class="text-sm text-gray-600">рж╢рзЗржЦ ржЦрж╛рж▓рж┐ржж ржЖрж▓-рж░рж╛рж╢рзЗржжрзЗрж░ "рж╕ржорзЯрзЗрж░ рж╕ржжрзНржмрзНржпржмрж╣рж╛рж░" ржЖрж▓рзЛржЪржирж╛ ржЕржмрж▓ржорзНржмржирзЗ ржирж┐рж░рзНржорж┐рждред</p>
        <p class="text-xs text-gray-500 mt-1">Gemini AI ржжрзНржмрж╛рж░рж╛ ржЙржирзНржиржд ржПржХржЯрж┐ ржЗржирзНржЯрж╛рж░рзЗржХрзНржЯрж┐ржн ржЙржкрж╕рзНржерж╛ржкржирж╛ред</p>
    </footer>

<script>
document.addEventListener('DOMContentLoaded', () => {

    // --- Modal Logic ---
    const modal = document.getElementById('gemini-modal');
    const modalContent = document.querySelector('.modal-content');
    const modalLoading = document.getElementById('modal-loading');
    const modalResult = document.getElementById('modal-result');
    const modalCloseBtn = document.getElementById('modal-close-btn');

    function showModal(loading = true, content = '') {
        modal.classList.remove('hidden');
        document.body.style.overflow = 'hidden';
        if (loading) {
            modalLoading.classList.remove('hidden');
            modalResult.classList.add('hidden');
        } else {
            modalLoading.classList.add('hidden');
            modalResult.classList.remove('hidden');
            modalResult.innerHTML = content;
        }
        setTimeout(() => modal.style.opacity = '1', 10);
        setTimeout(() => modalContent.style.transform = 'translateY(0)', 10);
    }

    function hideModal() {
        modal.style.opacity = '0';
        modalContent.style.transform = 'translateY(-40px)';
        setTimeout(() => {
            modal.classList.add('hidden');
            document.body.style.overflow = 'auto';
        }, 250);
    }

    modalCloseBtn.addEventListener('click', hideModal);
    modal.addEventListener('click', (e) => {
        if (e.target === modal) {
            hideModal();
        }
    });

    // --- Gemini API Call Function ---
    async function callGemini(prompt) {
        showModal(true);
        let chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
        const payload = { contents: chatHistory };
        const apiKey = "AIzaSyBdOPNV9QsLtaDuiIAkfB3yBHvwyeAoHb4"; // API Key will be handled by the environment
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

        try {
            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });

            if (!response.ok) {
                 const errorBody = await response.text();
                 throw new Error(`API Error: ${response.status} ${response.statusText}. Details: ${errorBody}`);
            }

            const result = await response.json();
            
            if (result.candidates && result.candidates.length > 0 &&
                result.candidates[0].content && result.candidates[0].content.parts &&
                result.candidates[0].content.parts.length > 0) {
                const text = result.candidates[0].content.parts[0].text;
                // Basic formatting
                const formattedText = text
                    .replace(/## (.*?)\n/g, '<h3 class="text-xl font-bold text-[#8D806F] my-3">$1</h3>')
                    .replace(/\* \*\*(.*?)\*\*/g, '<li><strong>$1</strong>')
                    .replace(/\* (.*?)\n/g, '<li class="mb-2 ml-4 list-disc">$1</li>')
                    .replace(/\n/g, '<br>');

                showModal(false, `<div class="text-left">${formattedText}</div>`);
            } else {
                throw new Error("Unexpected response structure from Gemini API.");
            }
        } catch (error) {
            console.error("Gemini API call failed:", error);
            showModal(false, `<p class="text-red-500">ржжрзБржГржЦрж┐ржд, ржПржХржЯрж┐ рж╕ржорж╕рзНржпрж╛ рж╣рзЯрзЗржЫрзЗред ржжрзЯрж╛ ржХрж░рзЗ ржЖржмрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржиред</p><p class="text-xs text-gray-500 mt-2">${error.message}</p>`);
        }
    }


    // --- Chart.js ---
    const ctx = document.getElementById('lifeChart');
    if(ctx) {
        new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['ржШрзБржо (Sleep)', 'рж╢рзИрж╢ржм (Childhood)', 'ржжрзИржиржирзНржжрж┐ржи ржкрзНрж░рзЯрзЛржЬржи', 'ржЖржорж▓рзЗрж░ ржЬржирзНржп рж╕ржорзЯ'],
                datasets: [{
                    label: 'ржЬрзАржмржиржХрж╛рж▓ (ржмржЫрж░)',
                    data: [20, 15, 3, 22],
                    backgroundColor: ['#3D5A80', '#98C1D9', '#E0FBFC', '#EE6C4D'],
                    borderColor: '#FDFBF6',
                    borderWidth: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'bottom', labels: { font: { family: "'Hind Siliguri', sans-serif" }}},
                    tooltip: { callbacks: { label: (c) => `${c.label}: ${c.parsed} ржмржЫрж░` }}
                }
            }
        });
    }

    // --- Category Tabs ---
    const categoryTabs = document.querySelectorAll('.category-tab');
    const categoryContent = document.getElementById('category-content');
    const categoriesData = {
        ' ╪╕┘Д┘Е ┘Д┘Ж┘Б╪│┘З': { title: 'ржирж┐ржЬрзЗрж░ ржкрзНрж░рждрж┐ ржЕрждрзНржпрж╛ржЪрж╛рж░рзА (╪з┘Д╪╕╪з┘Д┘Е ┘Д┘Ж┘Б╪│┘З)', description: 'ржПржЗ рж╢рзНрж░рзЗржгрзАрж░ ржорж╛ржирзБрж╖ ржЬрзАржмржиржХрзЗ ржЦрзЗрж▓рж╛ржзрзБрж▓рж╛ ржУ ржмрж┐ржирзЛржжржирзЗрж░ рж╕рзБржпрзЛржЧ ржоржирзЗ ржХрж░рзЗред рждрж╛рж░рж╛ ржЖрж▓рзНрж▓рж╛рж╣рж░ рж╕рзНржорж░ржг ржерзЗржХрзЗ ржЧрж╛ржлрзЗрж▓ ржерж╛ржХрзЗ ржПржмржВ рждрж╛ржжрзЗрж░ рж╕ржоржпрж╝ ржЧрж╛ржи-ржмрж╛ржЬржирж╛, ржЦрж╛ржУржпрж╝рж╛-ржжрж╛ржУржпрж╝рж╛ ржУ ржШрзБржорзЗ ржмрзНржпржпрж╝ ржХрж░рзЗ ржкрж╛ржк ржЕрж░рзНржЬржи ржХрж░рзЗред', verse: 'ржпрж╛ржжрзЗрж░ ржжрзБржирж┐ржпрж╝рж╛рж░ ржЬрзАржмржирзЗрж░ рж╕ржорж╕рзНржд ржкрзНрж░ржЪрзЗрж╖рзНржЯрж╛ ржкржгрзНржб рж╣ржпрж╝рзЗ ржЧрзЗржЫрзЗ, ржЕржержЪ рждрж╛рж░рж╛ ржоржирзЗ ржХрж░рзЗ ржпрзЗ рждрж╛рж░рж╛ рж╕рзОржХрж░рзНржо ржХрж░ржЫрзЗред (рж╕рзВрж░рж╛ ржЖрж▓-ржХрж╛рж╣ржл, рззрзжрзк)' },
        '┘Е┘В╪к╪╡╪п': { title: 'ржоржзрзНржпржоржкржирзНржерзА (╪з┘Д┘Е┘В╪к╪╡╪п)', description: 'ржПржЗ рж╢рзНрж░рзЗржгрзАрж░ ржорж╛ржирзБрж╖ ржлрж░ржЬ ржЗржмрж╛ржжрждржЧрзБрж▓рзЛ ржкрж╛рж▓ржи ржХрж░рзЗ ржПржмржВ ржмржбрж╝ ржзрж░ржирзЗрж░ рж╣рж╛рж░рж╛ржо ржХрж╛ржЬ ржерзЗржХрзЗ ржмрж┐рж░ржд ржерж╛ржХрзЗред ржХрж┐ржирзНрждрзБ рждрж╛рж░рж╛ рж╕рзБржирзНржиржд ржмрж╛ ржиржлрж▓ ржЗржмрж╛ржжрждрзЗрж░ ржкрзНрж░рждрж┐ ржЖржЧрзНрж░рж╣рзА ржирзЯред рждрж╛ржжрзЗрж░ ржЕржмрж╕рж░ рж╕ржоржпрж╝ ржЕрждрж┐рж░рж┐ржХрзНржд ржШрзБржо, ржЧрж▓рзНржкржЧрзБржЬржм ржПржмржВ ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯ ржХрж╛ржЬрзЗ ржмрзНржпржпрж╝ рж╣ржпрж╝ред', verse: 'рж░рж╛рж╕рзВрж▓рзБрж▓рзНрж▓рж╛рж╣ (я╖║) ржкрж╛ ржлрзБрж▓рзЗ ржпрж╛ржУржпрж╝рж╛ рж╕рждрзНрждрзНржмрзЗржУ рж░рж╛рждрзЗ ржирж╛ржорж╛ржЬрзЗ ржжрж╛ржБржбрж╝рж╛рждрзЗржи ржПржмржВ ржмрж▓рждрзЗржи, "ржЖржорж┐ ржХрж┐ ржПржХржЬржи ржХрзГрждржЬрзНржЮ ржмрж╛ржирзНржжрж╛ рж╣ржм ржирж╛?"' },
        '╪│╪з╪и┘В ╪и╪з┘Д╪о┘К╪▒╪з╪к': { title: 'ржХрж▓рзНржпрж╛ржгрзЗ ржЕржЧрзНрж░ржЧрж╛ржорзА (╪з┘Д╪│╪з╪и┘В ╪и╪з┘Д╪о┘К╪▒╪з╪к)', description: 'ржПржЗ рж╢рзНрж░рзЗржгрзАрж░ ржорж╛ржирзБрж╖ рж╕ржоржпрж╝рзЗрж░ ржорзВрж▓рзНржп ржкрзБрж░рзЛржкрзБрж░рж┐ ржЕржирзБржзрж╛ржмржи ржХрж░рзЗред рждрж╛рж░рж╛ ржжрзБржирж┐ржпрж╝рж╛ржХрзЗ ржЖржЦрж┐рж░рж╛рждрзЗрж░ рж╢рж╕рзНржпржХрзНрж╖рзЗрждрзНрж░ ржоржирзЗ ржХрж░рзЗред рждрж╛рж░рж╛ ржлрж░ржЬ ржУ ржиржлрж▓ ржЗржмрж╛ржжрждрзЗ ржкрзНрж░рждрж┐ржпрзЛржЧрж┐рждрж╛ ржХрж░рзЗред рждрж╛рж░рж╛ржЗ ржЙржорзНржорж╛рж╣рж░ ржЖрж╢рж╛ред', verse: 'рждрзЛржорж░рж╛ рждрзЛржорж╛ржжрзЗрж░ ржкрзНрж░рждрж┐ржкрж╛рж▓ржХрзЗрж░ ржХрзНрж╖ржорж╛ ржПржмржВ рж╕рзЗржЗ ржЬрж╛ржирзНржирж╛рждрзЗрж░ ржжрж┐ржХрзЗ ржжрзМржбрж╝рзЗ ржпрж╛ржУ... (рж╕рзВрж░рж╛ ржЖрж▓-рж╣рж╛ржжрзАржж, рзирзз)' }
    };
    function updateCategoryContent(target) {
        const data = categoriesData[target];
        if (data) categoryContent.innerHTML = `<h3 class="text-2xl font-bold text-[#8D806F] mb-3 text-center">${data.title}</h3><p class="mb-4 text-center">${data.description}</p><blockquote class="border-l-4 border-[#B08871] pl-4 italic text-gray-700 text-center mx-auto max-w-lg">${data.verse}</blockquote>`;
    }
    categoryTabs.forEach(tab => tab.addEventListener('click', () => {
        categoryTabs.forEach(t => t.classList.remove('tab-active'));
        tab.classList.add('tab-active');
        updateCategoryContent(tab.dataset.target);
    }));
    if(categoryTabs.length > 0) updateCategoryContent(categoryTabs[0].dataset.target);

    // --- Thieves of Time Checkboxes ---
    const thievesGrid = document.getElementById('thieves-grid');
    const thievesData = [
        { id: 'thief1', icon: 'ЁЯУ║', title: 'ржкрж░рзНржжрж╛рж░ ржЖрж╕ржХрзНрждрж┐', details: 'ржлрж┐рж▓рзНржо, рж╕рж┐рж░рж┐ржЬ, ржУ ржЧрж╛ржи-ржмрж╛ржЬржирж╛ред' },
        { id: 'thief2', icon: 'ЁЯЧгя╕П', title: 'ржЬрж┐рж╣рзНржмрж╛рж░ ржЕржкржмрзНржпржмрж╣рж╛рж░', details: 'ржЧрзАржмржд, ржкрж░ржирж┐ржирзНржжрж╛, ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯ ржХржерж╛ред' },
        { id: 'thief3', icon: 'ЁЯЫНя╕П', title: 'ржЙржжрзНржжрзЗрж╢рзНржпрж╣рзАржи ржШрзЛрж░рж╛ржШрзБрж░рж┐', details: 'ржмрж┐ржирж╛ ржкрзНрж░ржпрж╝рзЛржЬржирзЗ рж╢ржкрж┐ржВ ржорж▓ ржмрж╛ ржмрж╛ржЬрж╛рж░рзЗ ржШрзЛрж░рж╛ред' },
        { id: 'thief4', icon: 'ЁЯУ▒', title: 'рж╣рж╛рж░рж╛ржо рж╕ржорзНржкрж░рзНржХ', details: 'ржлрзЛржирзЗ ржмрж╛ рж╕рж╛ржорж╛ржЬрж┐ржХ ржорж╛ржзрзНржпржорзЗ ржЕржмрзИржз рж╕ржорзНржкрж░рзНржХред' },
        { id: 'thief5', icon: 'ЁЯУ░', title: 'ржЕрж╣рзЗрждрзБржХ ржорж┐ржбрж┐рзЯрж╛', details: 'рж▓рж╛ржнржЬржиржХ ржирзЯ ржПржоржи ржкрждрзНрж░рж┐ржХрж╛ ржмрж╛ ржЦржмрж░ ржкрзЬрж╛ред' },
        { id: 'thief6', icon: 'ЁЯШ┤', title: 'ржЕрждрж┐рж░рж┐ржХрзНржд ржШрзБржо ржУ ржЖрж▓рж╕рзНржп', details: 'ржкрзНрж░рзЯрзЛржЬржирзЗрж░ ржЕрждрж┐рж░рж┐ржХрзНржд ржШрзБржорж╛ржирзЛред' }
    ];
    if (thievesGrid) {
        thievesGrid.innerHTML = thievesData.map(thief => `
            <label for="${thief.id}" class="cursor-pointer">
                <input type="checkbox" id="${thief.id}" value="${thief.title}" class="thief-checkbox hidden">
                <div class="bg-white/50 rounded-lg p-6 shadow-sm border-2 border-transparent hover:shadow-lg transition-all duration-300 h-full">
                    <div class="text-4xl mb-3">${thief.icon}</div>
                    <h3 class="text-xl font-bold mb-2">${thief.title}</h3>
                    <p class="text-sm text-gray-600">${thief.details}</p>
                </div>
            </label>
        `).join('');
    }

    // --- Gemini Plan Generator ---
    const generatePlanBtn = document.getElementById('generate-plan-btn');
    if (generatePlanBtn) {
        generatePlanBtn.addEventListener('click', () => {
            const selectedThieves = Array.from(document.querySelectorAll('.thief-checkbox:checked')).map(cb => cb.value);
            if (selectedThieves.length === 0) {
                showModal(false, '<p>ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ ржХржоржкржХрзНрж╖рзЗ ржПржХржЯрж┐ ржмрж┐рж╖рзЯ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржиред</p>');
                return;
            }
            const prompt = `ржПржХржЬржи ржЗрж╕рж▓рж╛ржорж┐ ржЙржкржжрзЗрж╖рзНржЯрж╛ рж╣рж┐рж╕рзЗржмрзЗ, ржпрзЗ ржмрзНржпржХрзНрждрж┐ "${selectedThieves.join(', ')}" ржПржЗ рж╕ржорж╕рзНржпрж╛ржЧрзБрж▓рзЛрж░ рж╕рж╛ржерзЗ рж▓ржбрж╝рж╛ржЗ ржХрж░ржЫрзЗ, рждрж╛рж░ ржЬржирзНржп ржПржХржЯрж┐ ржмрж╛рж╕рзНрждржмрж╕ржорзНржоржд ржУ ржзрж╛ржкрзЗ ржзрж╛ржкрзЗ ржХрж░рзНржо-ржкрж░рж┐ржХрж▓рзНржкржирж╛ рждрзИрж░рж┐ ржХрж░рзБржиред ржкрж░рж┐ржХрж▓рзНржкржирж╛ржЯрж┐ ржЕржмрж╢рзНржпржЗ ржмрж╛ржВрж▓рж╛ ржнрж╛рж╖рж╛ржпрж╝ рж╣рждрзЗ рж╣ржмрзЗ ржПржмржВ ржХрзБрж░ржЖржи ржУ рж╕рзБржирзНржирж╛рж╣рж░ ржЖрж▓рзЛржХрзЗ ржЙрзОрж╕рж╛рж╣ржмрзНржпржЮрзНржЬржХ ржУ ржкрзНрж░рзЗрж░ржгрж╛ржжрж╛ржпрж╝ржХ рж╣рждрзЗ рж╣ржмрзЗред рж╕рзБржирзНржжрж░ржнрж╛ржмрзЗ ржлрж░ржорзНржпрж╛ржЯ ржХрж░рзЗ ржЙрждрзНрждрж░ ржжрж┐ржиред`;
            callGemini(prompt);
        });
    }

    // --- Gemini Dua Generator ---
    const generateDuaBtn = document.getElementById('generate-dua-btn');
    const duaPromptInput = document.getElementById('dua-prompt-input');
    if (generateDuaBtn) {
        generateDuaBtn.addEventListener('click', () => {
            const userNeed = duaPromptInput.value.trim();
            if (userNeed === "") {
                showModal(false, '<p>ржЖржкржирж╛рж░ ржкрзНрж░рзЯрзЛржЬржи ржмрж╛ ржЗржЪрзНржЫрж╛рж░ ржХржерж╛ рж▓рж┐ржЦрзБржиред</p>');
                return;
            }
            const prompt = `ржПржХржЬржи ржЗрж╕рж▓рж╛ржорж┐ ржмрж┐рж╢рзЗрж╖ржЬрзНржЮ рж╣рж┐рж╕рзЗржмрзЗ, ржпрзЗ ржмрзНржпржХрзНрждрж┐ "${userNeed}" ржПрж░ ржЬржирзНржп ржжрзЛрзЯрж╛ ржХрж░рждрзЗ ржЪрж╛рзЯ, рждрж╛рж░ ржЬржирзНржп ржПржХржЯрж┐ ржЖржирзНрждрж░рж┐ржХ ржУ рж╕рзБржирзНржжрж░ ржжрзЛрзЯрж╛ рждрзИрж░рж┐ ржХрж░рзБржиред ржжрзЛрзЯрж╛ржЯрж┐ ржЕржмрж╢рзНржпржЗ ржмрж╛ржВрж▓рж╛ ржнрж╛рж╖рж╛ржпрж╝ рж╣рждрзЗ рж╣ржмрзЗ ржПржмржВ ржПрж░ ржнрж╛рж╖рж╛ ржУ ржнрж╛ржм ржХрзБрж░ржЖржи ржУ ржиржмржмрзА ржжрзЛрзЯрж╛рж░ ржорждрзЛ рж╣рждрзЗ рж╣ржмрзЗред`;
            callGemini(prompt);
        });
    }


    // --- Salaf Quotes Carousel ---
    const quotes = [
        { speaker: 'ржЗржмржирзЗ ржорж╛рж╕ржЙржж (рж░рж╛ржГ)', quote: 'ржЖржорж┐ ржПржоржи ржХрзЛржирзЛ ржжрж┐ржирзЗрж░ ржЬржирзНржп ржПрждржЯрж╛ ржЕржирзБрждржкрзНржд рж╣ржЗ ржирж╛, ржпрж╛рж░ рж╕рзВрж░рзНржп ржбрзБржмрзЗ ржЧрзЗрж▓, ржЖржорж╛рж░ ржЖржпрж╝рзБ ржХржорзЗ ржЧрзЗрж▓, ржХрж┐ржирзНрждрзБ ржЖржорж╛рж░ ржЖржорж▓ ржмрж╛рзЬрж▓рзЛ ржирж╛ред' },
        { speaker: 'ржЙржорж░ ржЗржмржирзЗ ржЖржмржжрзБрж▓ ржЖржЬрж┐ржЬ (рж░рж╣ржГ)', quote: 'ржирж┐рж╢рзНржЪрзЯржЗ рж░рж╛ржд ржУ ржжрж┐ржи рждрзЛржорж╛рж░ ржЙржкрж░ ржХрж╛ржЬ ржХрж░ржЫрзЗ (рждрзЛржорж╛ржХрзЗ ржХрзНрж╖рзЯ ржХрж░ржЫрзЗ), рждрж╛ржЗ рждрзБржорж┐ржУ рждрж╛ржжрзЗрж░ ржоржзрзНржпрзЗ (рж╕рзО) ржХрж╛ржЬ ржХрж░рзЛред' },
        { speaker: 'рж╣рж╛рж╕рж╛ржи ржЖрж▓-ржмрж╕рж░рзА (рж░рж╣ржГ)', quote: 'рж╣рзЗ ржЖржжржо рж╕ржирзНрждрж╛ржи, рждрзБржорж┐ рждрзЛ ржХрзЯрзЗржХржЯрж┐ ржжрж┐ржирзЗрж░ рж╕ржорж╖рзНржЯрж┐ ржорж╛рждрзНрж░ред ржпржЦржи ржПржХржЯрж┐ ржжрж┐ржи ржЪрж▓рзЗ ржпрж╛рзЯ, рждржЦржи рждрзЛржорж╛рж░ ржХрж┐ржЫрзБ ржЕржВрж╢ржУ ржЪрж▓рзЗ ржпрж╛рзЯред' },
        { speaker: 'ржЖржорж░ ржЗржмржирзЗ ржХрж╛ржЗрж╕ (рж░рж╣ржГ)', quote: 'ржПржХ ржмрзНржпржХрзНрждрж┐ рждрж╛ржХрзЗ ржмрж▓рзЗржЫрж┐рж▓, "ржЖржорж╛рж░ рж╕рж╛ржерзЗ ржмрж╕рзБржи, ржХржерж╛ ржмрж▓рж┐ред" рждрж┐ржирж┐ ржЙрждрзНрждрж░ ржжрж┐рж▓рзЗржи, "рждрж╛рж╣рж▓рзЗ рж╕рзВрж░рзНржпржХрзЗ ржерж╛ржорж╛ржиред"' }
    ];
    let currentQuoteIndex = 0;
    const carouselContainer = document.getElementById('salaf-quotes-carousel');
    const nextBtn = document.getElementById('next-quote');
    const prevBtn = document.getElementById('prev-quote');
    function showQuote(index) {
        if (!carouselContainer) return;
        carouselContainer.innerHTML = `<div class="text-center transition-opacity duration-500 opacity-100"><p class="text-lg italic mb-4">"${quotes[index].quote}"</p><p class="font-bold text-[#8D806F]">- ${quotes[index].speaker}</p></div>`;
    }
    if (nextBtn && prevBtn) {
        nextBtn.addEventListener('click', () => { currentQuoteIndex = (currentQuoteIndex + 1) % quotes.length; showQuote(currentQuoteIndex); });
        prevBtn.addEventListener('click', () => { currentQuoteIndex = (currentQuoteIndex - 1 + quotes.length) % quotes.length; showQuote(currentQuoteIndex); });
        showQuote(0);
    }

    // --- Blueprint Accordion ---
    const blueprintItems = [
        { title: 'ржмрж┐ржиржпрж╝рзА рж╣ржпрж╝рзЗ ржЪрж▓рж╛', content: 'рждрж╛рж░рж╛ ржкрзГржерж┐ржмрзАрждрзЗ ржиржорзНрж░ржнрж╛ржмрзЗ ржЪрж▓рж╛ржлрзЗрж░рж╛ ржХрж░рзЗред' }, { title: 'рж╢рж╛ржирзНрждрж┐ржкрзВрж░рзНржг ржЙрждрзНрждрж░', content: 'ржорзВрж░рзНржЦрж░рж╛ рждрж╛ржжрзЗрж░ рж╕рж╛ржерзЗ ржХржерж╛ ржмрж▓рж▓рзЗ рждрж╛рж░рж╛ ржмрж▓рзЗ, тАШрж╕рж╛рж▓рж╛ржотАЩред' }, { title: 'рж░рж╛рждрзЗрж░ ржЗржмрж╛ржжржд', content: 'рждрж╛рж░рж╛ рждрж╛ржжрзЗрж░ ржкрзНрж░рждрж┐ржкрж╛рж▓ржХрзЗрж░ ржЙржжрзНржжрзЗрж╢рзЗ рж╕рж┐ржЬржжрж╛ржмржиржд ржУ ржжржгрзНржбрж╛ржпрж╝ржорж╛ржи ржЕржмрж╕рзНржерж╛ржпрж╝ рж░рж╛рждрзНрж░рж┐ ржпрж╛ржкржи ржХрж░рзЗред' }, { title: 'ржЬрж╛рж╣рж╛ржирзНржирж╛ржо ржерзЗржХрзЗ ржкрж╛ржирж╛рж╣ ржЪрж╛ржУрзЯрж╛', content: 'рждрж╛рж░рж╛ ржЬрж╛рж╣рж╛ржирзНржирж╛ржорзЗрж░ рж╢рж╛рж╕рзНрждрж┐ ржерзЗржХрзЗ ржмрж╛ржБржЪрж╛рж░ ржЬржирзНржп ржжрзЛрзЯрж╛ ржХрж░рзЗред' }, { title: 'ржмрзНржпржпрж╝рзЗ ржоржзрзНржпржоржкржирзНржерж╛', content: 'рждрж╛рж░рж╛ ржпржЦржи ржмрзНржпржпрж╝ ржХрж░рзЗ рждржЦржи ржЕржкржЪржпрж╝ ржХрж░рзЗ ржирж╛ ржПржмржВ ржХрж╛рж░рзНржкржгрзНржпржУ ржХрж░рзЗ ржирж╛ред' }, { title: 'рж╢рж┐рж░ржХ, рж╣рждрзНржпрж╛ ржУ ржпрж┐ржирж╛ ржерзЗржХрзЗ ржмрж┐рж░ржд ржерж╛ржХрж╛', content: 'рждрж╛рж░рж╛ ржЖрж▓рзНрж▓рж╛рж╣рж░ рж╕рж╛ржерзЗ ржЕржирзНржп ржХрзЛржирзЛ ржЙржкрж╛рж╕рзНржпржХрзЗ ржбрж╛ржХрзЗ ржирж╛, ржЕржирзНржпрж╛рзЯржнрж╛ржмрзЗ ржХрж╛ржЙржХрзЗ рж╣рждрзНржпрж╛ ржХрж░рзЗ ржирж╛ ржПржмржВ ржмрзНржпржнрж┐ржЪрж╛рж░ ржХрж░рзЗ ржирж╛ред' }, { title: 'ржорж┐ржерзНржпрж╛ рж╕рж╛ржХрзНрж╖рзНржп ржирж╛ ржжрзЗржУрзЯрж╛', content: 'рждрж╛рж░рж╛ ржорж┐ржерзНржпрж╛ рж╕рж╛ржХрзНрж╖рзНржп ржжрзЗржпрж╝ ржирж╛ред' }, { title: 'ржЕрж╣рзЗрждрзБржХ ржмрж┐рж╖ржпрж╝ ржПржбрж╝рж┐ржпрж╝рзЗ ржЪрж▓рж╛', content: 'ржпржЦржи рждрж╛рж░рж╛ ржЕрж╣рзЗрждрзБржХ ржмрж┐рж╖ржпрж╝рзЗрж░ ржкрж╛рж╢ ржжрж┐ржпрж╝рзЗ ржпрж╛ржпрж╝, рждржЦржи рждрж╛рж░рж╛ ржнржжрзНрж░ржнрж╛ржмрзЗ ржЪрж▓рзЗ ржпрж╛ржпрж╝ред' }, { title: 'ржХрзБрж░ржЖржирзЗрж░ ржкрзНрж░рждрж┐ ржоржирзЛржпрзЛржЧрзА рж╣ржУрзЯрж╛', content: 'рждрж╛ржжрзЗрж░ржХрзЗ рждрж╛ржжрзЗрж░ ржкрзНрж░рждрж┐ржкрж╛рж▓ржХрзЗрж░ ржЖржпрж╝рж╛ржд рж╕рзНржорж░ржг ржХрж░рж┐ржпрж╝рзЗ ржжрж┐рж▓рзЗ рждрж╛рж░рж╛ рждрж╛рж░ ржкрзНрж░рждрж┐ ржЕржирзНржз ржУ ржмржзрж┐рж░ рж╣ржпрж╝рзЗ ржерж╛ржХрзЗ ржирж╛ред' }, { title: 'ржкрж░рж┐ржмрж╛рж░рзЗрж░ ржЬржирзНржп ржжрзЛржпрж╝рж╛', content: 'рждрж╛рж░рж╛ ржжрзЛрзЯрж╛ ржХрж░рзЗ, "рж╣рзЗ ржЖржорж╛ржжрзЗрж░ ржкрзНрж░рждрж┐ржкрж╛рж▓ржХ, ржЖржорж╛ржжрзЗрж░ рж╕рзНрждрзНрж░рзА ржУ рж╕ржирзНрждрж╛ржиржжрзЗрж░ржХрзЗ ржЪрзЛржЦрзЗрж░ рж╢рзАрждрж▓рждрж╛ ржжрж╛ржи ржХрж░рзБржи ржПржмржВ ржЖржорж╛ржжрзЗрж░ржХрзЗ ржорзБрждрзНрждрж╛ржХрзАржжрзЗрж░ ржирзЗрждрж╛ ржмрж╛ржирж╛ржиред"' }
    ];
    const accordionContainer = document.getElementById('blueprint-accordion');
    if (accordionContainer) {
        accordionContainer.innerHTML = blueprintItems.map((item, index) => `<div class="border-b border-gray-200"><h2><button type="button" class="flex items-center justify-between w-full p-4 font-semibold text-left" data-accordion-target="item-${index}"><span>${item.title}</span><span class="transform transition-transform duration-300 ">тЦ╝</span></button></h2><div id="item-${index}" class="hidden p-4 pt-0 text-gray-600">${item.content}</div></div>`).join('');
        accordionContainer.addEventListener('click', e => {
            const button = e.target.closest('[data-accordion-target]');
            if (button) {
                const targetPanel = document.getElementById(button.getAttribute('data-accordion-target'));
                const isExpanded = targetPanel.style.display === 'block';
                targetPanel.style.display = isExpanded ? 'none' : 'block';
                button.querySelector('span:last-child').classList.toggle('rotate-180', !isExpanded);
            }
        });
    }

    // --- Active Nav Link on Scroll ---
    const sections = document.querySelectorAll('section');
    const navLinks = document.querySelectorAll('.nav-link');
    window.addEventListener('scroll', () => {
        let current = '';
        sections.forEach(section => { if (pageYOffset >= section.offsetTop - 100) current = section.getAttribute('id'); });
        navLinks.forEach(link => {
            link.classList.remove('nav-active');
            if (link.getAttribute('href').includes(current)) link.classList.add('nav-active');
        });
    });
});
</script>
</body>
</html>
